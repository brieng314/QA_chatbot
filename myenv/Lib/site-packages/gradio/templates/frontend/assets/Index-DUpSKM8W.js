import{p as y,d as qe,i as ve,c as P,e as pe,r as Ae,t as Ie,a as Oe,u as Qe,f as Ue,g as We}from"./i18n-CLA-aXfX.js";import{p as xe,R as ze,ac as Fe,l as K,d as N,i as r,m as k,a as Je,f as Q,e as m,U as ye,$ as Ke,t as I,b as T,c as ke,g as $,aD as me,s as x,_ as Ne,j as _,k as fe,W as Ve,h as w,r as b,a9 as V,O as he,Q as be,aA as Ze,af as et,ag as tt,ah as rt}from"./index-zQcUQ9m1.js";import{G as at}from"./utils.svelte-DtXXSlyN.js";import{a as st}from"./actions-C-VE6FDE.js";import{b as nt}from"./input-D71CySwn.js";import{b as ge}from"./misc-snWqx6W0.js";import{t as O,E as lt}from"./tinycolor-Byo6XIcx.js";/* empty css                                                        */import{B as ot}from"./BlockTitle-CuzKPIeo.js";import"./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js";import{B as it}from"./Block-DgGHn7bv.js";import{S as ut}from"./index-CDsfLiji.js";/* empty css                                                   */import{default as It}from"./Example-pNvOvnt9.js";import"./Info-DM2eBECo.js";import"./MarkdownCode-vmwH67uD.js";import"./html-B3q7QijE.js";import"./prism-python-D43YKUi0.js";import"./IconButton-B7IBJBO5.js";import"./svelte-component-BXBUmXeM.js";import"./Clear-G_Bw7Svf.js";function ct(o,s){const i=e=>{o&&!o.contains(e.target)&&!e.defaultPrevented&&s(e)};return document.addEventListener("mousedown",i,!0),{destroy(){document.removeEventListener("mousedown",i,!0)}}}function we(o){const s=o.s,i=o.v;let e=s*i;const f=o.h/60;let u=e*(1-Math.abs(f%2-1));const c=i-e;e=e+c,u=u+c;const g=Math.floor(f)%6,v=[e,u,c,c,u,e][g],p=[u,e,e,u,c,c][g],B=[c,c,u,e,e,u][g];return`rgba(${v*255}, ${p*255}, ${B*255}, ${o.a})`}function dt(o,s){return s==="hex"?O(o).toHexString():s==="rgb"?O(o).toRgbString():O(o).toHslString()}var _t=Q("<button> </button>"),vt=Q('<div class="color-picker svelte-nbn1m9"><div class="color-gradient svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="hue-slider svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="input svelte-nbn1m9"><button class="swatch svelte-nbn1m9"></button> <div><div class="input-wrap svelte-nbn1m9"><input type="text" class="svelte-nbn1m9"/> <button class="eyedropper svelte-nbn1m9"><!></button></div> <div class="buttons svelte-nbn1m9"></div></div></div></div>'),pt=Q('<!> <button class="dialog-button svelte-nbn1m9"></button> <!>',1);function mt(o,s){xe(s,!1);const i=k();let e=y(s,"value",12,"#000000"),f=y(s,"label",12),u=y(s,"info",12,void 0),c=y(s,"disabled",12,!1),g=y(s,"show_label",12,!0),v=y(s,"current_mode",12,"hex"),p=y(s,"dialog_open",12,!1),B=k(!1),M=k(),E=k();const R=ze();let S=k([0,0]),d=null,L=!1,Y=[0,0],H=k(0),U=k(0),h=null,j=!1;function $e(t){h=t.currentTarget.getBoundingClientRect(),j=!0,Z(t.clientX)}function Z(t){if(!h)return;const a=Math.max(0,Math.min(t-h.left,h.width));_(U,a);const l=a/h.width*360;_(H,l),e(we({h:l,s:Y[0],v:Y[1],a:1})),R("input")}function ee(t,a){if(!d)return;const l=Math.max(0,Math.min(t-d.left,d.width)),C=Math.max(0,Math.min(a-d.top,d.height));_(S,[l,C]);const D={h:r(H)*1,s:l/d.width,v:1-C/d.height,a:1};Y=[D.s,D.v],e(we(D)),R("input")}function Be(t){L=!0,d=t.currentTarget.getBoundingClientRect(),ee(t.clientX,t.clientY)}function Me(t){L&&ee(t.clientX,t.clientY),j&&Z(t.clientX)}function Ee(){L=!1,j=!1}async function te(t){if(L||j||(await Ne(),!t)||(!d&&r(M)&&(d=r(M).getBoundingClientRect()),!h&&r(E)&&(h=r(E).getBoundingClientRect()),!d||!h))return;const a=O(t).toHsv(),l=a.s*d.width,C=(1-a.v)*d.height;_(S,[l,C]),Y=[a.s,a.v],_(H,a.h),_(U,a.h/360*h.width)}function Re(){new EyeDropper().open().then(a=>{e(a.sRGBHex)}),R("input")}const Se=[["Hex","hex"],["RGB","rgb"],["HSL","hsl"]];Fe(async()=>{_(B,window!==void 0&&!!window.EyeDropper)});function Ce(){p(!1)}function De(){R("selected",r(i)),R("close")}K(()=>(N(e()),N(v())),()=>{_(i,dt(e(),v()))}),K(()=>r(i),()=>{r(i)&&R("selected",r(i))}),K(()=>N(e()),()=>{te(e())}),Je();var He={get value(){return e()},set value(t){e(t),$()},get label(){return f()},set label(t){f(t),$()},get info(){return u()},set info(t){u(t),$()},get disabled(){return c()},set disabled(t){c(t),$()},get show_label(){return g()},set show_label(t){g(t),$()},get current_mode(){return v()},set current_mode(t){v(t),$()},get dialog_open(){return p()},set dialog_open(t){p(t),$()}};qe();var re=pt();m("mousemove",me,Me),m("mouseup",me,Ee);var ae=ye(re);ot(ae,{get show_label(){return g()},get info(){return u()},children:(t,a)=>{Ve();var l=Ke();I(()=>fe(l,f())),T(t,l)},$$slots:{default:!0}});var q=x(ae,2);let se;var Xe=x(q,2);{var Ge=t=>{var a=vt(),l=w(a),C=w(l);let D;b(l),pe(l,n=>_(M,n),()=>r(M));var X=x(l,2),Pe=w(X);let ne;b(X),pe(X,n=>_(E,n),()=>r(E));var le=x(X,2),W=w(le);let oe;var ie=x(W,2),z=w(ie),A=w(z);Ae(A);var F=x(A,2),Te=w(F);{var Le=n=>{lt(n)};ve(Te,n=>{r(B)&&n(Le)})}b(F),b(z);var ue=x(z,2);Ie(ue,5,()=>Se,Qe,(n,J,ht,bt)=>{var ce=V(()=>Ze(r(J),2));let Ye=()=>r(ce)[0],de=()=>r(ce)[1];var G=_t();let _e;var je=w(G,!0);b(G),I(()=>{_e=Oe(G,1,"button svelte-nbn1m9",null,_e,{active:v()===de()}),fe(je,Ye())}),m("click",G,()=>v(de())),T(n,G)}),b(ue),b(ie),b(le),b(a),he(()=>m("focus",a,function(n){ge.call(this,s,n)})),he(()=>m("blur",a,function(n){ge.call(this,s,n)})),st(a,(n,J)=>ct?.(n,J),()=>Ce),I(()=>{P(l,`--hue:${r(H)??""}`),D=P(C,"",D,{transform:`translate(${r(S),be(()=>r(S)[0])??""}px,${r(S),be(()=>r(S)[1])??""}px)`,background:e()}),ne=P(Pe,"",ne,{background:"hsl("+r(H)+", 100%, 50%)",transform:`translateX(${r(U)??""}px)`}),oe=P(W,"",oe,{background:e()})}),m("mousedown",l,Be),m("mousedown",X,$e),m("click",W,De),nt(A,()=>r(i),n=>_(i,n)),m("change",A,n=>{e(n.currentTarget.value)}),m("click",F,Re),T(t,a)};ve(Xe,t=>{p()&&t(Ge)})}return I(()=>{q.disabled=c(),se=P(q,"",se,{background:e()})}),m("click",q,()=>{te(e()),p(!p())}),T(o,re),ke(He)}var ft=Q("<!> <!>",1);function jt(o,s){xe(s,!0);let i=Ue(s,["$$slots","$$events","$$legacy"]);const e=new at(i);e.props.value=e.props.value??"#000000";let f=et(tt(e.props.value)),u=V(()=>e.shared.label||e.i18n("color_picker.color_picker"));rt(()=>{r(f)!==e.props.value&&(_(f,e.props.value,!0),e.dispatch("change"))}),it(o,{get visible(){return e.shared.visible},get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},children:(c,g)=>{var v=ft(),p=ye(v);ut(p,We({get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n}},()=>e.shared.loading_status,{on_clear_status:()=>e.dispatch("clear_status",e.shared.loading_status)}));var B=x(p,2);{let M=V(()=>!e.shared.interactive);mt(B,{get label(){return r(u)},get info(){return e.props.info},get show_label(){return e.shared.show_label},get disabled(){return r(M)},get value(){return e.props.value},set value(E){e.props.value=E},$$events:{input:()=>e.dispatch("input"),submit:()=>e.dispatch("submit"),blur:()=>e.dispatch("blur"),focus:()=>e.dispatch("focus")}})}T(c,v)},$$slots:{default:!0}}),ke()}export{mt as BaseColorPicker,It as BaseExample,jt as default};
