import{p as o,d as ct,i as B,b as se,e as De,t as _t,u as ft,M as Yt,a as xe,c as Kt,f as Xt,g as Ot}from"./i18n-CLA-aXfX.js";import{n as Qt,b as x,_ as ye,p as je,R as pt,ac as Le,j as i,m as E,i as t,ai as Jt,l as ve,d as y,a as gt,f as F,h as b,r as m,t as $,c as Ye,aB as Nt,g as s,Q as R,s as V,e as z,U as Te,k as Me,aS as Zt,aT as $t,S as er,T as tr,$ as We,O as we,W as rr,X as st,Y as ar,V as it,af as Ge,a9 as me}from"./index-zQcUQ9m1.js";import{f as nt,G as lr}from"./utils.svelte-DtXXSlyN.js";import{a as or}from"./actions-C-VE6FDE.js";import{b as sr}from"./input-D71CySwn.js";import{p as ir}from"./event-modifiers-CdEA5IGF.js";import{b as Ae}from"./misc-snWqx6W0.js";/* empty css                                                        */import{B as nr}from"./BlockTitle-CuzKPIeo.js";import"./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js";import{A as ur}from"./ArrowUp-C3gqDIL5.js";import{C as dr}from"./Check-D17sy-za.js";import{C as ut}from"./Clear-G_Bw7Svf.js";import{F as cr}from"./File-CCqkJzFm.js";import{M as _r}from"./Microphone-Bo8Iyiy1.js";import{M as fr}from"./Music-Dyf3R8ai.js";import{S as mt}from"./Square-Lg2xePrl.js";import{V as pr}from"./Video-Bvefcjvg.js";import{U as gr}from"./Upload-BKx5p3GO.js";/* empty css                                             */import{I as mr}from"./Image-4Q0YgCzk.js";/* empty css                                                   *//* empty css                                                   */import{u as vr,p as hr,M as br}from"./MinimalAudioPlayer-CX04FWPU.js";import{o as dt}from"./InteractiveAudio.svelte_svelte_type_style_lang-DjdIbtc4.js";/* empty css                                              */import{B as xr}from"./Block-DgGHn7bv.js";import{S as wr}from"./index-CDsfLiji.js";import{default as Ea}from"./Example-C-ZgD7pi.js";import"./Info-DM2eBECo.js";import"./MarkdownCode-vmwH67uD.js";import"./html-B3q7QijE.js";import"./prism-python-D43YKUi0.js";import"./props-CKo_ykv6.js";import"./utils-BsTlurbm.js";/* empty css                                            */import"./IconButton-B7IBJBO5.js";import"./svelte-component-BXBUmXeM.js";import"./size-DXToHkwE.js";import"./Video-BGpvcOiX.js";var yr=Qt('<svg fill="currentColor" width="100%" height="100%" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M1752.768 221.109C1532.646.986 1174.283.986 954.161 221.109l-838.588 838.588c-154.052 154.165-154.052 404.894 0 558.946 149.534 149.421 409.976 149.308 559.059 0l758.738-758.626c87.982-88.094 87.982-231.417 0-319.51-88.32-88.208-231.642-87.982-319.51 0l-638.796 638.908 79.85 79.849 638.795-638.908c43.934-43.821 115.539-43.934 159.812 0 43.934 44.047 43.934 115.877 0 159.812l-758.739 758.625c-110.23 110.118-289.355 110.005-399.36 0-110.118-110.117-110.005-289.242 0-399.247l838.588-838.588c175.963-175.962 462.382-176.188 638.909 0 176.075 176.188 176.075 462.833 0 638.908l-798.607 798.72 79.849 79.85 798.607-798.72c220.01-220.123 220.01-578.485 0-798.607" fill-rule="evenodd"></path></g></svg>');function kr(M){var l=yr();x(M,l)}async function Ee(M,l,c){if(await ye(),l===c)return;const A=window.getComputedStyle(M),D=parseFloat(A.paddingTop),r=parseFloat(A.paddingBottom),ee=parseFloat(A.lineHeight);let k=c===void 0?!1:D+r+ee*c,G=D+r+l*ee;M.style.height="1px";let W;k&&M.scrollHeight>k?W=k:M.scrollHeight<G?W=G:W=M.scrollHeight,M.style.height=`${W}px`}function Cr(M,l){if(l.lines===l.max_lines)return;M.style.overflowY="scroll";function c(A){Ee(A.target,l.lines,l.max_lines)}if(M.addEventListener("input",c),!!l.text.trim())return Ee(M,l.lines,l.max_lines),{destroy:()=>M.removeEventListener("input",c)}}var qr=F("<option> </option>"),Sr=F('<select class="device-select-large svelte-doy9oc" aria-label="Select input device"></select>'),Rr=F('<div class="device-selection-wrapper svelte-doy9oc"><!> <button class="record-button svelte-doy9oc" aria-label="Start recording"></button></div>'),Mr=F('<div class="waveform-wrapper svelte-doy9oc"></div> <div class="timestamp svelte-doy9oc"> </div> <button class="stop-button svelte-doy9oc" aria-label="Stop recording"><!></button>',1),zr=F('<div class="minimal-audio-recorder svelte-doy9oc" data-testid="minimal-audio-recorder"><!></div>');function Ar(M,l){je(l,!1);let c=o(l,"label",12),A=o(l,"waveform_settings",28,()=>({})),D=o(l,"recording",12,!1),r=o(l,"upload",12),ee=o(l,"root",12),k=o(l,"max_file_size",12,null),G=o(l,"upload_promise",12,null);const W=pt();let I=E(),j,q=E(),re=E(0),L,Y=E(!1),K=E(!1),T=E([]),C=E(""),te=E(!1);const fe=()=>{clearInterval(L),L=setInterval(()=>{Zt(re)},1e3)},ue=async()=>{if(!t(I))return;j&&j.destroy();const u=getComputedStyle(document.documentElement).getPropertyValue("--color-accent")||"#ff7c00";j=vr.create({container:t(I),height:32,waveColor:"rgba(128, 128, 128, 0.5)",progressColor:u,cursorColor:"transparent",barWidth:2,barGap:2,barRadius:2,interact:!1,hideScrollbar:!0,...A()}),i(q,j.registerPlugin(dt.create({scrollingWaveform:!0,scrollingWaveformWindow:7,renderRecordedAudio:!1}))),t(q).on("record-start",()=>{fe(),i(Y,!0),i(K,!0)}),t(q).on("record-end",async d=>{clearInterval(L),i(Y,!1),G((async()=>{try{const X=await d.arrayBuffer(),v=await new AudioContext({sampleRate:A().sampleRate||44100}).decodeAudioData(X);if(v){const H=await hr(v),P=new File([H],"audio.wav",{type:"audio/wav"}),f=await Nt([P],!1),oe=(await r()(f,ee(),void 0,k()||void 0))?.[0];oe&&W("change",oe)}}catch(X){console.error("Error processing audio:",X)}finally{W("stop_recording"),G(null)}})()),await G()})};Le(async()=>{try{const u=await dt.getAvailableAudioDevices();i(T,u.filter(d=>d.deviceId)),t(T).length>0&&i(C,t(T)[0].deviceId),t(T).length>1?i(te,!0):await ue()}catch{await ue()}}),Jt(()=>{clearInterval(L),t(q)&&t(q).stopMic(),j&&j.destroy()});async function ie(){if(i(te,!1),i(K,!0),await ye(),await ue(),!!t(q))try{await t(q).startMic({deviceId:t(C)}),t(q).startRecording()}catch(u){console.error("Error starting recording:",u),i(te,t(T).length>1),i(K,!1),D(!1)}}ve(()=>(y(D()),t(Y),t(q),t(K),t(T),t(C)),()=>{D()&&!t(Y)&&t(q)&&t(K)===!1&&t(T).length<=1?t(q).startMic({deviceId:t(C)}).then(()=>{t(q)?.startRecording()}):!D()&&t(Y)&&t(q)&&(t(q).stopRecording(),i(re,0))}),gt();var de={get label(){return c()},set label(u){c(u),s()},get waveform_settings(){return A()},set waveform_settings(u){A(u),s()},get recording(){return D()},set recording(u){D(u),s()},get upload(){return r()},set upload(u){r(u),s()},get root(){return ee()},set root(u){ee(u),s()},get max_file_size(){return k()},set max_file_size(u){k(u),s()},get upload_promise(){return G()},set upload_promise(u){G(u),s()}};ct();var ae=zr(),he=b(ae);{var N=u=>{var d=Rr(),X=b(d);{var S=H=>{var P=Sr();$(()=>{t(C),$t(()=>{t(T)})}),_t(P,5,()=>t(T),ft,(f,le)=>{var oe=qr(),Re=b(oe,!0);m(oe);var Z={};$(()=>{Me(Re,(t(le),R(()=>t(le).label))),Z!==(Z=(t(le),R(()=>t(le).deviceId)))&&(oe.value=(oe.__value=(t(le),R(()=>t(le).deviceId)))??"")}),x(f,oe)}),m(P),Yt(P,()=>t(C),f=>i(C,f)),x(H,P)};B(X,H=>{t(T),R(()=>t(T).length>1)&&H(S)})}var v=V(X,2);m(d),z("click",v,ie),x(u,d)},be=u=>{var d=Mr(),X=Te(d);De(X,f=>i(I,f),()=>t(I));var S=V(X,2),v=b(S,!0);m(S);var H=V(S,2),P=b(H);mt(P,{}),m(H),$(f=>Me(v,f),[()=>(y(nt),t(re),R(()=>nt(t(re))))]),z("click",H,()=>{D(!1)}),x(u,d)};B(he,u=>{t(te)?u(N):u(be,!1)})}return m(ae),$(()=>se(ae,"aria-label",c()||"Audio Recorder")),x(M,ae),Ye(de)}var Dr=F('<div class="recording-content svelte-1qn0337"><!></div>'),Tr=F('<div class="recording-content svelte-1qn0337"><!> <div class="action-buttons svelte-1qn0337"><button class="confirm-button svelte-1qn0337" aria-label="Attach audio"><!></button> <button class="cancel-button svelte-1qn0337" aria-label="Clear audio"><!></button></div></div>'),Er=F("<div><!></div>"),Ir=F('<button data-testid="upload-button" class="upload-button thumbnail-add svelte-1qn0337" aria-label="Upload a file"><!></button>'),Pr=F('<span class="thumbnail-wrapper svelte-1qn0337" role="listitem" aria-label="File thumbnail"><div class="thumbnail-item thumbnail-small svelte-1qn0337"><!> <button class="delete-button svelte-1qn0337" aria-label="Remove file"><!></button></div></span>'),Br=F('<div class="loader svelte-1qn0337" role="status" aria-label="Uploading"></div>'),Fr=F('<div class="thumbnails svelte-1qn0337" aria-label="Uploaded files" data-testid="container_el"><!> <!> <!></div>'),Hr=F('<button data-testid="microphone-button" aria-label="Record audio"><!></button>'),Ur=F('<button data-testid="submit-button" aria-label="Submit"><!></button>'),Vr=F('<button aria-label="Stop"><!></button>'),Wr=F('<div role="group" aria-label="Multimedia input field"><!> <div class="input-container svelte-1qn0337"><!> <!> <div><!> <div class="input-row svelte-1qn0337"><textarea data-testid="textbox"></textarea> <!> <!> <!></div></div></div></div>');function Gr(M,l){je(l,!1);const c=E(),A=E(),D=E();let r=o(l,"value",28,()=>({text:"",files:[]})),ee=o(l,"value_is_output",12,!1),k=o(l,"lines",12,1),G=o(l,"i18n",12),W=o(l,"placeholder",12,""),I=o(l,"disabled",12,!1),j=o(l,"label",12),q=o(l,"info",12,void 0),re=o(l,"show_label",12,!0),L=o(l,"max_lines",12),Y=o(l,"submit_btn",12,null),K=o(l,"stop_btn",12,null),T=o(l,"rtl",12,!1),C=o(l,"autofocus",12,!1),te=o(l,"text_align",12,void 0),fe=o(l,"autoscroll",12,!0),ue=o(l,"root",12),ie=o(l,"file_types_string",12,null),de=o(l,"max_file_size",12,null),ae=o(l,"upload",12),he=o(l,"stream_handler",12),N=o(l,"file_count",12,"multiple"),be=o(l,"max_plain_text_length",12,1e3),u=o(l,"waveform_settings",12),d=o(l,"waveform_options",28,()=>({show_recording_waveform:!0})),X=o(l,"sources_string",12,"upload"),S=o(l,"active_source",12,null),v=o(l,"html_attributes",12,null),H=o(l,"upload_promise",12,null),P=E(),f=E(),le,oe=0,Re=!1,Z=o(l,"dragging",12,!1),ke=E(!1),Ie=E(r()?.text??""),ce=E(!1),ne=E(null),Pe=E();const O=pt();er(()=>{le=t(f)&&t(f).offsetHeight+t(f).scrollTop>t(f).scrollHeight-100});const vt=()=>{le&&fe()&&!Re&&t(f).scrollTo(0,t(f).scrollHeight)};async function Ke(){O("change",r()),ee()||O("input")}Le(()=>{C()&&t(f)!==null&&t(f).focus()}),tr(()=>{le&&fe()&&vt(),C()&&t(f)&&t(f).focus()});function ht(e){const a=e.target,n=a.value,p=[a.selectionStart,a.selectionEnd];O("select",{value:n.substring(...p),index:p})}async function bt(e){e.key==="Enter"&&e.shiftKey&&k()>1?(e.preventDefault(),await ye(),O("submit")):e.key==="Enter"&&!e.shiftKey&&k()===1&&L()>=1&&(e.preventDefault(),Be(),S(null),await ye(),O("submit"))}function xt(e){const a=e.target,n=a.scrollTop;n<oe&&(Re=!0),oe=n;const p=a.scrollHeight-a.clientHeight;n>=p&&(Re=!1)}async function wt({detail:e}){if(Ke(),Array.isArray(e)){for(let a of e)r().files.push(a);r(r())}else r().files.push(e),r(r());await ye(),O("change",r()),O("upload",e)}function yt(e,a){Ke(),e.stopPropagation(),r().files.splice(a,1),r(r())}function kt(){t(P).open_upload()}function Ct(){O("stop")}function Be(){t(ne)&&(r().files.push(t(ne)),r(r()),i(ne,null),O("change",r()))}function qt(){Be(),S(null),O("submit")}async function St(e){if(!e.clipboardData)return;const a=e.clipboardData.items,n=e.clipboardData.getData("text");if(n&&n.length>be()){e.preventDefault();const p=new window.File([n],"pasted_text.txt",{type:"text/plain",lastModified:Date.now()});t(P)&&t(P).load_files([p]);return}for(let p in a){const U=a[p];if(U.kind==="file"&&U.type.includes("image")){const Q=U.getAsFile();Q&&t(P).load_files([Q])}}}function Rt(e){e.preventDefault(),Z(!0)}function Mt(e){e.preventDefault();const a=t(Pe).getBoundingClientRect(),{clientX:n,clientY:p}=e;(n<=a.left||n>=a.right||p<=a.top||p>=a.bottom)&&Z(!1)}function zt(e){if(e.preventDefault(),Z(!1),e.dataTransfer&&e.dataTransfer.files){const a=Array.from(e.dataTransfer.files);if(t(A)){const n=a.filter(U=>t(A).some(Q=>Q.startsWith(".")?U.name.toLowerCase().endsWith(Q.toLowerCase()):U.type.match(new RegExp(Q.replace("*",".*"))))),p=a.length-n.length;p>0&&O("error",`${p} file(s) were rejected. Accepted formats: ${t(A).join(", ")}`),n.length>0&&t(P).load_files(n)}else t(P).load_files(a)}}ve(()=>y(X()),()=>{i(c,X().split(",").map(e=>e.trim()).filter(e=>e==="upload"||e==="microphone"))}),ve(()=>y(ie()),()=>{i(A,ie()?ie().split(",").map(e=>e.trim()):null)}),ve(()=>y(Z()),()=>{O("drag",Z())}),ve(()=>y(r()),()=>{r()===null&&r({text:"",files:[]})}),ve(()=>(t(c),y(N()),y(r())),()=>{i(D,t(c)&&t(c).includes("upload")&&!(N()==="single"&&r().files.length>0))}),ve(()=>(t(Ie),y(r())),()=>{t(Ie)!==r().text&&(O("change",r()),i(Ie,r().text))}),ve(()=>(y(r()),t(f),y(k()),y(L()),Ee),()=>{r(),t(f)&&k()!==L()&&Ee(t(f),k(),L())}),gt();var At={get value(){return r()},set value(e){r(e),s()},get value_is_output(){return ee()},set value_is_output(e){ee(e),s()},get lines(){return k()},set lines(e){k(e),s()},get i18n(){return G()},set i18n(e){G(e),s()},get placeholder(){return W()},set placeholder(e){W(e),s()},get disabled(){return I()},set disabled(e){I(e),s()},get label(){return j()},set label(e){j(e),s()},get info(){return q()},set info(e){q(e),s()},get show_label(){return re()},set show_label(e){re(e),s()},get max_lines(){return L()},set max_lines(e){L(e),s()},get submit_btn(){return Y()},set submit_btn(e){Y(e),s()},get stop_btn(){return K()},set stop_btn(e){K(e),s()},get rtl(){return T()},set rtl(e){T(e),s()},get autofocus(){return C()},set autofocus(e){C(e),s()},get text_align(){return te()},set text_align(e){te(e),s()},get autoscroll(){return fe()},set autoscroll(e){fe(e),s()},get root(){return ue()},set root(e){ue(e),s()},get file_types_string(){return ie()},set file_types_string(e){ie(e),s()},get max_file_size(){return de()},set max_file_size(e){de(e),s()},get upload(){return ae()},set upload(e){ae(e),s()},get stream_handler(){return he()},set stream_handler(e){he(e),s()},get file_count(){return N()},set file_count(e){N(e),s()},get max_plain_text_length(){return be()},set max_plain_text_length(e){be(e),s()},get waveform_settings(){return u()},set waveform_settings(e){u(e),s()},get waveform_options(){return d()},set waveform_options(e){d(e),s()},get sources_string(){return X()},set sources_string(e){X(e),s()},get active_source(){return S()},set active_source(e){S(e),s()},get html_attributes(){return v()},set html_attributes(e){v(e),s()},get upload_promise(){return H()},set upload_promise(e){H(e),s()},get dragging(){return Z()},set dragging(e){Z(e),s()}};ct();var _e=Wr();let Xe;var Oe=b(_e);nr(Oe,{get show_label(){return re()},get info(){return q()},get rtl(){return T()},children:(e,a)=>{rr();var n=We();$(()=>Me(n,j())),x(e,n)},$$slots:{default:!0}});var Qe=V(Oe,2),Je=b(Qe);{var Dt=e=>{var a=Er();let n;var p=b(a);{var U=w=>{var h=Dr(),g=b(h);{let pe=it(()=>j()||"Audio");Ar(g,{get label(){return t(pe)},get waveform_settings(){return u()},get recording(){return t(ce)},get upload(){return ae()},get root(){return ue()},get max_file_size(){return de()},get upload_promise(){return H()},set upload_promise(J){H(J)},$$events:{change:({detail:J})=>{i(ne,J)},stop_recording:()=>{i(ce,!1),O("stop_recording")},clear:()=>{S(null),i(ce,!1),i(ne,null)},error:({detail:J})=>{console.log("Failed to record:",J),S(null),i(ce,!1),i(ne,null)}},$$legacy:!0})}m(h),x(w,h)},Q=w=>{var h=Tr(),g=b(h);{let Ue=it(()=>j()||"Audio");br(g,{get value(){return t(ne)},get label(){return t(Ue)},loop:!1})}var pe=V(g,2),J=b(pe),ze=b(J);dr(ze),m(J);var Ce=V(J,2),He=b(Ce);ut(He),m(Ce),m(pe),m(h),z("click",J,()=>{Be(),S(null),i(ce,!1)}),z("click",Ce,()=>{S(null),i(ce,!1),i(ne,null)}),x(w,h)};B(p,w=>{t(ne)?w(Q,!1):w(U)})}m(a),$(()=>n=xe(a,1,"recording-overlay svelte-1qn0337",null,n,{"has-audio":t(ne)!==null})),x(e,a)};B(Je,e=>{t(c),y(S()),R(()=>t(c)&&t(c).includes("microphone")&&S()==="microphone")&&e(Dt)})}var Ne=V(Je,2);{var Tt=e=>{De(gr(e,{get file_count(){return N()},get filetype(){return t(A)},get root(){return ue()},get max_file_size(){return de()},show_progress:!1,disable_click:!0,hidden:!0,get upload(){return ae()},get stream_handler(){return he()},get upload_promise(){return H()},set upload_promise(a){H(a)},get dragging(){return Z()},set dragging(a){Z(a)},get uploading(){return t(ke)},set uploading(a){i(ke,a)},$$events:{load:wt,error(a){Ae.call(this,l,a)}},$$legacy:!0}),a=>i(P,a),()=>t(P))};B(Ne,e=>{t(D)&&e(Tt)})}var Fe=V(Ne,2);let Ze;var $e=b(Fe);{var Et=e=>{var a=Fr(),n=b(a);{var p=h=>{var g=Ir(),pe=b(g);kr(pe),m(g),$(()=>g.disabled=I()),z("click",g,kt),x(h,g)};B(n,h=>{t(D)&&h(p)})}var U=V(n,2);_t(U,1,()=>(y(r()),R(()=>r().files)),ft,(h,g,pe)=>{var J=Pr(),ze=b(J),Ce=b(ze);{var He=ge=>{mr(ge,{get src(){return t(g),R(()=>t(g).url)},restProps:{title:null,alt:"",loading:"lazy",class:"thumbnail-image"}})},Ue=ge=>{var lt=st(),Ut=Te(lt);{var Vt=qe=>{fr(qe)},Wt=qe=>{var ot=st(),Gt=Te(ot);{var jt=Se=>{pr(Se)},Lt=Se=>{cr(Se)};B(Gt,Se=>{t(g),R(()=>t(g).mime_type&&t(g).mime_type.includes("video"))?Se(jt):Se(Lt,!1)},!0)}x(qe,ot)};B(Ut,qe=>{t(g),R(()=>t(g).mime_type&&t(g).mime_type.includes("audio"))?qe(Vt):qe(Wt,!1)},!0)}x(ge,lt)};B(Ce,ge=>{t(g),R(()=>t(g).mime_type&&t(g).mime_type.includes("image"))?ge(He):ge(Ue,!1)})}var Ve=V(Ce,2),Ht=b(Ve);ut(Ht),m(Ve),m(ze),m(J),z("click",Ve,ge=>yt(ge,pe)),x(h,J)});var Q=V(U,2);{var w=h=>{var g=Br();x(h,g)};B(Q,h=>{t(ke)&&h(w)})}m(a),x(e,a)};B($e,e=>{y(r()),t(ke),t(D),R(()=>r().files.length>0||t(ke)||t(D))&&e(Et)})}var et=V($e,2),_=b(et);ar(_);let tt;or(_,(e,a)=>Cr?.(e,a),()=>({text:r().text,lines:k(),max_lines:L()})),we(()=>sr(_,()=>r().text,e=>r(r().text=e,!0))),De(_,e=>i(f,e),()=>t(f)),we(()=>z("keypress",_,bt)),we(()=>z("blur",_,function(e){Ae.call(this,l,e)})),we(()=>z("select",_,ht)),we(()=>z("focus",_,function(e){Ae.call(this,l,e)})),we(()=>z("scroll",_,xt)),we(()=>z("paste",_,St));var rt=V(_,2);{var It=e=>{var a=Hr();let n;var p=b(a);_r(p),m(a),$(()=>{n=xe(a,1,"microphone-button svelte-1qn0337",null,n,{recording:t(ce)}),a.disabled=I()}),z("click",a,async()=>{S()!=="microphone"?(S("microphone"),await ye(),i(ce,!0)):(S(null),i(ce,!1))}),x(e,a)};B(rt,e=>{t(c),R(()=>t(c)&&t(c).includes("microphone"))&&e(It)})}var at=V(rt,2);{var Pt=e=>{var a=Ur();let n;var p=b(a);{var U=w=>{ur(w)},Q=w=>{var h=We();$(()=>Me(h,Y())),x(w,h)};B(p,w=>{Y()===!0?w(U):w(Q,!1)})}m(a),$(()=>{n=xe(a,1,"submit-button svelte-1qn0337",null,n,{"padded-button":Y()!==!0}),a.disabled=I()}),z("click",a,qt),x(e,a)};B(at,e=>{Y()&&e(Pt)})}var Bt=V(at,2);{var Ft=e=>{var a=Vr();let n;var p=b(a);{var U=w=>{mt(w,{fill:"none",stroke_width:2.5})},Q=w=>{var h=We();$(()=>Me(h,K())),x(w,h)};B(p,w=>{K()===!0?w(U):w(Q,!1)})}m(a),$(()=>n=xe(a,1,"stop-button svelte-1qn0337",null,n,{"padded-button":K()!==!0})),z("click",a,Ct),x(e,a)};B(Bt,e=>{K()&&e(Ft)})}return m(et),m(Fe),m(Qe),m(_e),De(_e,e=>i(Pe,e),()=>t(Pe)),$(()=>{Xe=xe(_e,1,"full-container svelte-1qn0337",null,Xe,{dragging:Z()}),Ze=xe(Fe,1,"input-wrapper svelte-1qn0337",null,Ze,{"has-files":r().files.length>0||t(ke)}),se(_,"dir",T()?"rtl":"ltr"),se(_,"placeholder",W()),se(_,"rows",k()),_.disabled=I(),Kt(_,te()?"text-align: "+te():""),se(_,"autocapitalize",(y(v()),R(()=>v()?.autocapitalize))),se(_,"autocorrect",(y(v()),R(()=>v()?.autocorrect))),se(_,"spellcheck",(y(v()),R(()=>v()?.spellcheck))),se(_,"autocomplete",(y(v()),R(()=>v()?.autocomplete))),se(_,"tabindex",(y(v()),R(()=>v()?.tabindex))),se(_,"enterkeyhint",(y(v()),R(()=>v()?.enterkeyhint))),se(_,"lang",(y(v()),R(()=>v()?.lang))),tt=xe(_,1,"svelte-1qn0337",null,tt,{"no-label":!re()}),_.dir=_.dir}),z("dragenter",_e,Rt),z("dragleave",_e,Mt),z("dragover",_e,ir(function(e){Ae.call(this,l,e)})),z("drop",_e,zt),x(M,_e),Ye(At)}var jr=F("<!> <!>",1);function Aa(M,l){je(l,!0);let c=Ge(void 0);class A extends lr{async get_data(){return t(c)&&(await t(c),await ye()),await super.get_data()}}let D=Xt(l,["$$slots","$$events","$$legacy"]);const r=new A(D),ee=me(()=>r.props.value||{text:"",files:[]});let k=Ge(!1),G=Ge(null),W="darkorange";const I={height:50,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:!1,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20,waveColor:"",progressColor:"",mediaControls:!1,sampleRate:44100};Le(()=>{W=getComputedStyle(document?.documentElement).getPropertyValue("--color-accent"),q(),I.waveColor=r.props?.waveform_options?.waveform_color||"#9ca3af",I.progressColor=r.props?.waveform_options?.waveform_progress_color||W,I.mediaControls=r.props?.waveform_options?.show_controls,I.sampleRate=r.props?.waveform_options?.sample_rate||44100});const j={color:r.props?.waveform_options?.trim_region_color};function q(){document.documentElement.style.setProperty("--trim-region-color",j.color||W)}const re=(...C)=>r.shared.client.upload(...C),L=C=>r.i18n(C),Y=(...C)=>r.shared.client.stream(...C);let K=me(()=>r.props.sources.join(",")),T=me(()=>(r.props.file_types||[]).join(",")||null);{let C=me(()=>[...r.shared.elem_classes||[],"multimodal-textbox"]),te=me(()=>t(k)?"focus":"base");xr(M,{get visible(){return r.shared.visible},get elem_id(){return r.shared.elem_id},get elem_classes(){return t(C)},get scale(){return r.shared.scale},get min_width(){return r.shared.min_width},allow_overflow:!1,padding:!1,get border_mode(){return t(te)},children:(fe,ue)=>{var ie=jr(),de=Te(ie);{var ae=N=>{wr(N,Ot({get autoscroll(){return r.shared.autoscroll},get i18n(){return r.i18n}},()=>r.shared.loading_status,{on_clear_status:()=>r.dispatch("clear_status",r.shared.loading_status)}))};B(de,N=>{r.shared.loading_status&&N(ae)})}var he=V(de,2);{let N=me(()=>r.shared.label||"MultimodalTextbox"),be=me(()=>r.props.max_lines?r.props.max_lines:r.props.lines+1),u=me(()=>!r.shared.interactive);Gr(he,{get value(){return t(ee)},value_is_output:!0,get file_types_string(){return t(T)},get root(){return r.shared.root},get label(){return t(N)},get info(){return r.props.info},get show_label(){return r.shared.show_label},get lines(){return r.props.lines},get rtl(){return r.props.rtl},get text_align(){return r.props.text_align},get waveform_settings(){return I},i18n:L,get max_lines(){return t(be)},get placeholder(){return r.props.placeholder},get submit_btn(){return r.props.submit_btn},get stop_btn(){return r.props.stop_btn},get autofocus(){return r.props.autofocus},get autoscroll(){return r.shared.autoscroll},get file_count(){return r.props.file_count},get sources_string(){return t(K)},get max_file_size(){return r.shared.max_file_size},get disabled(){return t(u)},upload:re,stream_handler:Y,get max_plain_text_length(){return r.props.max_plain_text_length},get html_attributes(){return r.props.html_attributes},get upload_promise(){return t(c)},set upload_promise(d){i(c,d,!0)},get dragging(){return t(k)},set dragging(d){i(k,d,!0)},get active_source(){return t(G)},set active_source(d){i(G,d,!0)},$$events:{change:d=>(r.props.value=d.detail,r.dispatch("change",r.props.value)),input:()=>r.dispatch("input"),submit:()=>r.dispatch("submit"),stop:()=>r.dispatch("stop"),blur:()=>r.dispatch("blur"),select:d=>r.dispatch("select",d.detail),focus:()=>r.dispatch("focus"),error:({detail:d})=>{r.dispatch("error",d)},start_recording:()=>r.dispatch("start_recording"),pause_recording:()=>r.dispatch("pause_recording"),stop_recording:()=>r.dispatch("stop_recording"),upload:d=>r.dispatch("upload",d.detail),clear:()=>r.dispatch("clear")}})}x(fe,ie)},$$slots:{default:!0}})}Ye()}export{Ea as BaseExample,Gr as BaseMultimodalTextbox,Aa as default};
