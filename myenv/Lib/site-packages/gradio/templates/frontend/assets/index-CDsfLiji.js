import{x as mt,p as w,d as ht,q as wt,a as Ve,c as he,m as Be,i as d,e as bt,t as Ee,u as Te,s as De}from"./i18n-CLA-aXfX.js";import{p as Oe,ac as pt,f as E,t as b,b as a,c as Qe,g as xt,s as p,h as q,Q as _e,r as P,ah as be,i as r,af as ue,j as I,a9 as K,k as B,U as j,X as W,_ as kt,$ as J}from"./index-zQcUQ9m1.js";/* empty css                                                   *//* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js";import{I as Xe}from"./IconButton-B7IBJBO5.js";import{C as Ye}from"./Clear-G_Bw7Svf.js";const yt=()=>performance.now(),S={tick:s=>requestAnimationFrame(s),now:()=>yt(),tasks:new Set};function Re(){const s=S.now();S.tasks.forEach(e=>{e.c(s)||(S.tasks.delete(e),e.f())}),S.tasks.size!==0&&S.tick(Re)}function Ft(s){let e;return S.tasks.size===0&&S.tick(Re),{promise:new Promise(t=>{S.tasks.add(e={c:s,f:t})}),abort(){S.tasks.delete(e)}}}function Le(s){let e=["","k","M","G","T","P","E","Z"],t=0;for(;s>1e3&&t<e.length-1;)s/=1e3,t++;let o=e[t];return(Number.isInteger(s)?s:s.toFixed(1))+o}function Ge(s){return Object.prototype.toString.call(s)==="[object Date]"}function Me(s,e,t,o){if(typeof t=="number"||Ge(t)){const g=o-t,l=(t-e)/(s.dt||1/60),V=s.opts.stiffness*g,i=s.opts.damping*l,u=(V-i)*s.inv_mass,M=(l+u)*s.dt;return Math.abs(M)<s.opts.precision&&Math.abs(g)<s.opts.precision?o:(s.settled=!1,Ge(t)?new Date(t.getTime()+M):t+M)}else{if(Array.isArray(t))return t.map((g,l)=>Me(s,e[l],t[l],o[l]));if(typeof t=="object"){const g={};for(const l in t)g[l]=Me(s,e[l],t[l],o[l]);return g}else throw new Error(`Cannot spring ${typeof t} values`)}}function Ne(s,e={}){const t=mt(s),{stiffness:o=.15,damping:g=.8,precision:l=.01}=e;let V,i,u,M=s,T=s,D=1,se=0,y=!1;function Z(C,m={}){T=C;const $=u={};return s==null||m.hard||X.stiffness>=1&&X.damping>=1?(y=!0,V=S.now(),M=C,t.set(s=T),Promise.resolve()):(m.soft&&(se=1/((m.soft===!0?.5:+m.soft)*60),D=0),i||(V=S.now(),y=!1,i=Ft(F=>{if(y)return y=!1,i=null,!1;D=Math.min(D+se,1);const Y=Math.min(F-V,1e3/30),re={inv_mass:D,opts:X,settled:!0,dt:Y*60/1e3},ae=Me(re,M,s,T);return V=F,M=s,t.set(s=ae),re.settled&&(i=null),!re.settled})),new Promise(F=>{i.promise.then(()=>{$===u&&F()})}))}const X={set:Z,update:(C,m)=>Z(C(T,s),m),subscribe:t.subscribe,stiffness:o,damping:g,precision:l};return X}var Lt=E('<div><svg viewBox="-1200 -1200 3000 3000" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1vhirvf"><g><path d="M255.926 0.754768L509.702 139.936V221.027L255.926 81.8465V0.754768Z" fill="#FF7C00" fill-opacity="0.4" class="svelte-1vhirvf"></path><path d="M509.69 139.936L254.981 279.641V361.255L509.69 221.55V139.936Z" fill="#FF7C00" class="svelte-1vhirvf"></path><path d="M0.250138 139.937L254.981 279.641V361.255L0.250138 221.55V139.937Z" fill="#FF7C00" fill-opacity="0.4" class="svelte-1vhirvf"></path><path d="M255.923 0.232622L0.236328 139.936V221.55L255.923 81.8469V0.232622Z" fill="#FF7C00" class="svelte-1vhirvf"></path></g><g><path d="M255.926 141.5L509.702 280.681V361.773L255.926 222.592V141.5Z" fill="#FF7C00" fill-opacity="0.4" class="svelte-1vhirvf"></path><path d="M509.69 280.679L254.981 420.384V501.998L509.69 362.293V280.679Z" fill="#FF7C00" class="svelte-1vhirvf"></path><path d="M0.250138 280.681L254.981 420.386V502L0.250138 362.295V280.681Z" fill="#FF7C00" fill-opacity="0.4" class="svelte-1vhirvf"></path><path d="M255.923 140.977L0.236328 280.68V362.294L255.923 222.591V140.977Z" fill="#FF7C00" class="svelte-1vhirvf"></path></g></svg></div>');function jt(s,e){Oe(e,!1);const t=()=>Be(i,"$top",g),o=()=>Be(u,"$bottom",g),[g,l]=wt();let V=w(e,"margin",12,!0);const i=Ne([0,0]),u=Ne([0,0]);let M;async function T(){await Promise.all([i.set([125,140]),u.set([-125,-140])]),await Promise.all([i.set([-125,140]),u.set([125,-140])]),await Promise.all([i.set([-125,0]),u.set([125,-0])]),await Promise.all([i.set([125,0]),u.set([-125,0])])}async function D(){await T(),M||D()}async function se(){await Promise.all([i.set([125,0]),u.set([-125,0])]),D()}pt(()=>(se(),()=>M=!0));var y={get margin(){return V()},set margin(Y){V(Y),xt()}};ht();var Z=Lt();let X;var C=q(Z),m=q(C),$=p(m);P(C),P(Z),b(()=>{X=Ve(Z,1,"svelte-1vhirvf",null,X,{margin:V()}),he(m,`transform: translate(${t(),_e(()=>t()[0])??""}px, ${t(),_e(()=>t()[1])??""}px);`),he($,`transform: translate(${o(),_e(()=>o()[0])??""}px, ${o(),_e(()=>o()[1])??""}px);`)}),a(s,Z);var F=Qe(y);return l(),F}let pe=[],je=!1;const Vt=typeof window<"u",Ue=Vt?window.requestAnimationFrame:s=>{};async function Mt(s,e=!0){if(!(window.__gradio_mode__==="website"||window.__gradio_mode__!=="app"&&e!==!0)){if(pe.push(s),!je)je=!0;else return;await kt(),Ue(()=>{let t=[0,0];for(let o=0;o<pe.length;o++){const l=pe[o].getBoundingClientRect();(o===0||l.top+window.scrollY<=t[0])&&(t[0]=l.top+window.scrollY,t[1]=o)}window.scrollTo({top:t[0]-20,behavior:"smooth"}),je=!1,pe=[]})}}var Ct=E('<div class="validation-error svelte-1uj8rng"> <button class="svelte-1uj8rng"><!></button></div>'),qt=E('<div class="eta-bar svelte-1uj8rng"></div>'),Pt=E("<!> ",1),Zt=E("<!> <!> <!> <!>",1),zt=E('<div class="progress-level svelte-1uj8rng"><div class="progress-level-inner svelte-1uj8rng"><!></div> <div class="progress-bar-wrap svelte-1uj8rng"><div class="progress-bar svelte-1uj8rng"></div></div></div>'),It=E('<p class="loading svelte-1uj8rng"> </p> <!>',1),St=E("<!> <div><!> <!></div> <!> <!>",1),At=E('<div class="clear-status svelte-1uj8rng"><!></div> <span class="error svelte-1uj8rng"> </span> <!>',1),Bt=E('<div data-testid="status-tracker"><!> <!></div>');function Ot(s,e){Oe(e,!0);let t=w(e,"eta",7,null),o=w(e,"scroll_to_output",3,!1),g=w(e,"timer",3,!0),l=w(e,"show_progress",3,"full"),V=w(e,"message",3,null),i=w(e,"progress",3,null),u=w(e,"variant",3,"default"),M=w(e,"loading_text",3,"Loading..."),T=w(e,"absolute",3,!0),D=w(e,"translucent",3,!1),se=w(e,"border",3,!1),y=w(e,"validation_error",7,null),Z=w(e,"show_validation_error",3,!0),X=w(e,"type",3,null),C,m=!1,$=ue(0),F=ue(null),Y=ue(null),re=ue(!1),ae=ue(null);const He=K(()=>X()==="input"||!e.status||e.status==="complete"||l()==="hidden"||e.status=="streaming"||!!(Z()&&y()));let we=ue(0);const Je=K(()=>r(Y)===null||r(Y)<=0||!r(we)?0:Math.min(r(we)/r(Y),1)),Ke=K(()=>r(we).toFixed(1));let We=K(()=>i()==null);function Ce(){Ue(()=>{I(we,(performance.now()-r($))/1e3),m&&Ce()})}let G=K(()=>{let f=null;i()!=null?f=i().map(L=>{if(L.index!=null&&L.length!=null)return L.index/L.length;if(L.progress!=null)return L.progress}):f=null;let x,z="";return f?(x=f[f.length-1],x===0?z="0":z="150ms"):x=void 0,{progress_level:f,last_progress_level:x,progress_bar_transition:z}});function $e(){m||(I(F,I(ae,null),!0),I($,performance.now(),!0),m=!0,Ce())}function et(){I(F,I(ae,null),!0),m&&(m=!1)}be(()=>{e.status==="pending"?$e():_e(()=>{et()})}),be(()=>{C&&o()&&(e.status==="pending"||e.status==="complete")&&Mt(C,e.autoscroll)}),be(()=>{t()===null&&t(r(F)),t()!=null&&r(F)!==t()&&(I(Y,(performance.now()-r($))/1e3+t()),I(ae,r(Y).toFixed(1),!0),I(F,t(),!0))});function tt(){I(re,!1)}be(()=>{_e(()=>{tt()}),e.status==="error"&&V()&&I(re,!0)});var le=Bt();let qe,Pe;var Ze=q(le);{var st=f=>{var x=Ct(),z=q(x),L=p(z),A=q(L);{let ee=K(()=>e.i18n?e.i18n("common.clear"):"Clear");Xe(A,{get Icon(){return Ye},get label(){return r(ee)},disabled:!1,size:"x-small",background:"var(--background-fill-primary)",color:"var(--error-background-text)",border:"var(--border-color-primary)",$$events:{click:()=>y(null)}})}P(L),P(x),b(()=>B(z,`${y()??""} `)),a(f,x)};d(Ze,f=>{y()&&Z()&&f(st)})}var rt=p(Ze,2);{var at=f=>{var x=St(),z=j(x);{var L=n=>{var v=qt();let _;b(()=>_=he(v,"",_,{transform:`translateX(${(r(Je)||0)*100-100}%)`})),a(n,v)};d(z,n=>{u()==="default"&&r(We)&&l()==="full"&&n(L)})}var A=p(z,2);let ee;var ne=q(A);{var xe=n=>{var v=W(),_=j(v);Ee(_,17,i,Te,(N,c)=>{var k=W(),O=j(k);{var oe=Q=>{var R=Pt(),ve=j(R);{var Fe=U=>{var te=J();b((ge,me)=>B(te,`${ge??""}/${me??""}`),[()=>Le(r(c).index||0),()=>Le(r(c).length)]),a(U,te)},fe=U=>{var te=J();b(ge=>B(te,ge),[()=>Le(r(c).index||0)]),a(U,te)};d(ve,U=>{r(c).length!=null?U(Fe):U(fe,!1)})}var de=p(ve);b(()=>B(de,` ${r(c).unit??""} |  `)),a(Q,R)};d(O,Q=>{r(c).index!=null&&Q(oe)})}a(N,k)}),a(n,v)},ce=n=>{var v=W(),_=j(v);{var N=k=>{var O=J();b(()=>B(O,`queue: ${e.queue_position+1}/${e.queue_size??""} |`)),a(k,O)},c=k=>{var O=W(),oe=j(O);{var Q=R=>{var ve=J("processing |");a(R,ve)};d(oe,R=>{e.queue_position===0&&R(Q)},!0)}a(k,O)};d(_,k=>{e.queue_position!==null&&e.queue_size!==void 0&&e.queue_position>=0?k(N):k(c,!1)},!0)}a(n,v)};d(ne,n=>{i()?n(xe):n(ce,!1)})}var ke=p(ne,2);{var ye=n=>{var v=J();b(()=>B(v,`${r(Ke)??""}${t()?`/${r(ae)}`:""}s`)),a(n,v)};d(ke,n=>{g()&&n(ye)})}P(A);var ie=p(A,2);{var nt=n=>{var v=zt(),_=q(v),N=q(_);{var c=Q=>{var R=W(),ve=j(R);Ee(ve,17,i,Te,(Fe,fe,de)=>{var U=W(),te=j(U);{var ge=me=>{var ze=Zt(),Ie=j(ze);{var ft=h=>{var H=J("Â /");a(h,H)};d(Ie,h=>{de!==0&&h(ft)})}var Se=p(Ie,2);{var dt=h=>{var H=J();b(()=>B(H,r(fe).desc)),a(h,H)};d(Se,h=>{r(fe).desc!=null&&h(dt)})}var Ae=p(Se,2);{var ut=h=>{var H=J("-");a(h,H)};d(Ae,h=>{r(fe).desc!=null&&r(G).progress_level&&r(G).progress_level[de]!=null&&h(ut)})}var _t=p(Ae,2);{var ct=h=>{var H=J();b(gt=>B(H,`${gt??""}%`),[()=>(100*(r(G).progress_level[de]||0)).toFixed(1)]),a(h,H)};d(_t,h=>{r(G).progress_level!=null&&h(ct)})}a(me,ze)};d(te,me=>{(r(fe).desc!=null||r(G).progress_level&&r(G).progress_level[de]!=null)&&me(ge)})}a(Fe,U)}),a(Q,R)};d(N,Q=>{i()!=null&&Q(c)})}P(_);var k=p(_,2),O=q(k);let oe;P(k),P(v),b(()=>oe=he(O,"",oe,{width:`${r(G).last_progress_level*100}%`,transition:r(G).progress_bar_transition})),a(n,v)},it=n=>{var v=W(),_=j(v);{var N=c=>{{let k=K(()=>u()==="default");jt(c,{get margin(){return r(k)}})}};d(_,c=>{l()==="full"&&c(N)},!0)}a(n,v)};d(ie,n=>{r(G).last_progress_level!=null?n(nt):n(it,!1)})}var ot=p(ie,2);{var vt=n=>{var v=It(),_=j(v),N=q(_,!0);P(_);var c=p(_,2);De(c,e,"additional-loading-text",{},null),b(()=>B(N,M())),a(n,v)};d(ot,n=>{g()||n(vt)})}b(()=>ee=Ve(A,1,"progress-text svelte-1uj8rng",null,ee,{"meta-text-center":u()==="center","meta-text":u()==="default"})),a(f,x)},lt=f=>{var x=W(),z=j(x);{var L=A=>{var ee=At(),ne=j(ee),xe=q(ne);{let ie=K(()=>e.i18n("common.clear"));Xe(xe,{get Icon(){return Ye},get label(){return r(ie)},disabled:!1,$$events:{click:()=>{e.on_clear_status?.()}}})}P(ne);var ce=p(ne,2),ke=q(ce,!0);P(ce);var ye=p(ce,2);De(ye,e,"error",{},null),b(ie=>B(ke,ie),[()=>e.i18n("common.error")]),a(A,ee)};d(z,A=>{e.status==="error"&&A(L)},!0)}a(f,x)};d(rt,f=>{e.status==="pending"?f(at):f(lt,!1)})}P(le),bt(le,f=>C=f,()=>C),b(()=>{qe=Ve(le,1,`wrap ${u()??""} ${l()??""}`,"svelte-1uj8rng",qe,{"no-click":y()&&Z(),hide:r(He),translucent:u()==="center"&&(e.status==="pending"||e.status==="error")||D()||l()==="minimal"||y(),generating:e.status==="generating"&&l()==="full",border:se()}),Pe=he(le,"",Pe,{position:T()?"absolute":"static",padding:T()?"0":"var(--size-8) 0"})}),a(s,le),Qe()}export{jt as L,Ot as S,Ge as i,Ft as l,S as r,Ne as s};
