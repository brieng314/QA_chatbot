import{f as j,g as k,i as C}from"./i18n-CLA-aXfX.js";import{p as P,f as F,U as I,b as S,j as _,af as v,i as a,a9 as n,c as E,_ as L,s as R}from"./index-zQcUQ9m1.js";import{B as T}from"./Block-DgGHn7bv.js";import"./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js";/* empty css                                                        */import{G as W}from"./utils.svelte-DtXXSlyN.js";import{U as q}from"./UploadText-CdWhf1vX.js";import D from"./Gallery-CVTn27J-.js";import{S as H}from"./index-CDsfLiji.js";/* empty css                                                   */import{F as J}from"./FileUpload-a4q3bJqY.js";/* empty css                                              */import{default as qe}from"./Example-B-R5dXcm.js";import"./prism-python-D43YKUi0.js";import"./ImagePaste-DZGLPUuh.js";import"./Upload-C3qqF65G.js";import"./window-D9mIs-QY.js";import"./event-modifiers-CdEA5IGF.js";import"./misc-snWqx6W0.js";import"./BlockLabel-BmXTkHTt.js";import"./IconButton-B7IBJBO5.js";import"./svelte-component-BXBUmXeM.js";import"./Empty-BZ_-KNsK.js";import"./ShareButton-_eP1IUQf.js";import"./Clear-G_Bw7Svf.js";import"./Download-X4TzKHZY.js";import"./Image-D4Pb0B7j.js";import"./Play-BMqghMO0.js";import"./IconButtonWrapper-dc02OfMv.js";import"./FullscreenButton-DgZ1jO8K.js";import"./Maximize-DZCF9YaH.js";import"./Upload-BKx5p3GO.js";import"./actions-C-VE6FDE.js";import"./props-CKo_ykv6.js";/* empty css                                             */import"./utils-BsTlurbm.js";import"./ModifyUpload-_NXBf0nx.js";import"./DownloadLink-DaQ_7WnR.js";import"./Edit-iP6wpb5V.js";import"./Undo-B0i5SYxj.js";import"./Image-4Q0YgCzk.js";/* empty css                                            *//* empty css                                                   */import"./Video-BGpvcOiX.js";import"./index-tFQomdd2.js";import"./File-CCqkJzFm.js";import"./html-B3q7QijE.js";var K=F("<!> <!>",1);function Re(w,g){P(g,!0);let u=v(void 0);class y extends W{async get_data(){return a(u)&&(await a(u),await L()),await super.get_data()}}const b=j(g,["$$slots","$$events","$$legacy"]),e=new y(b);let d=v(!1),$=n(()=>e.props.value===null?!0:e.props.value.length===0);function x(o){if(!e.props.value)return;const{index:i}=o.detail;e.dispatch("delete",o.detail),e.props.value=e.props.value.filter((s,p)=>p!==i),e.dispatch("change",e.props.value)}async function f(o){return(await Promise.all(o.map(async s=>{if(s.path?.toLowerCase().endsWith(".svg")&&s.url){const c=await(await fetch(s.url)).text();return{...s,url:`data:image/svg+xml,${encodeURIComponent(c)}`}}return s}))).map(s=>s.mime_type?.includes("video")?{video:s,caption:null}:{image:s,caption:null})}{let o=n(()=>typeof e.props.height=="number"?e.props.height:void 0);T(w,{get visible(){return e.shared.visible},variant:"solid",padding:!1,get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},allow_overflow:!1,get height(){return a(o)},get fullscreen(){return a(d)},set fullscreen(i){_(d,i,!0)},children:(i,s)=>{var p=K(),c=I(p);H(c,k({get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n}},()=>e.shared.loading_status,{on_clear_status:()=>e.dispatch("clear_status",e.shared.loading_status)}));var G=R(c,2);{var U=l=>{J(l,{value:null,get root(){return e.shared.root},get label(){return e.shared.label},get max_file_size(){return e.shared.max_file_size},file_count:"multiple",get file_types(){return e.props.file_types},get i18n(){return e.i18n},upload:(...r)=>e.shared.client.upload(...r),stream_handler:(...r)=>e.shared.client.stream(...r),get upload_promise(){return a(u)},set upload_promise(r){_(u,r,!0)},$$events:{upload:async r=>{const m=Array.isArray(r.detail)?r.detail:[r.detail];e.props.value=await f(m),e.dispatch("upload",e.props.value),e.dispatch("change",e.props.value)},error:({detail:r})=>{e.shared.loading_status=e.shared.loading_status||{},e.shared.loading_status.status="error",e.dispatch("error",r)}},children:(r,m)=>{q(r,{get i18n(){return e.i18n},type:"gallery"})},$$slots:{default:!0}})},z=l=>{{let r=n(()=>e.props.buttons.includes("share")),m=n(()=>e.props.buttons.includes("download")),A=n(()=>e.props.buttons.includes("fullscreen"));D(l,{get label(){return e.shared.label},get show_label(){return e.shared.show_label},get columns(){return e.props.columns},get rows(){return e.props.rows},get height(){return e.props.height},get preview(){return e.props.preview},get object_fit(){return e.props.object_fit},get interactive(){return e.shared.interactive},get allow_preview(){return e.props.allow_preview},get show_share_button(){return a(r)},get show_download_button(){return a(m)},get fit_columns(){return e.props.fit_columns},get i18n(){return e.i18n},_fetch:(...t)=>e.shared.client.fetch(...t),get show_fullscreen_button(){return a(A)},get fullscreen(){return a(d)},get root(){return e.shared.root},get file_types(){return e.props.file_types},get max_file_size(){return e.shared.max_file_size},upload:(...t)=>e.shared.client.upload(...t),stream_handler:(...t)=>e.shared.client.stream(...t),get selected_index(){return e.props.selected_index},set selected_index(t){e.props.selected_index=t},get value(){return e.props.value},set value(t){e.props.value=t},$$events:{change:()=>e.dispatch("change"),clear:()=>e.dispatch("change"),select:t=>e.dispatch("select",t.detail),share:t=>e.dispatch("share",t.detail),error:t=>e.dispatch("error",t.detail),preview_open:()=>e.dispatch("preview_open"),preview_close:()=>e.dispatch("preview_close"),fullscreen:({detail:t})=>{_(d,t,!0)},delete:x,upload:async t=>{const B=Array.isArray(t.detail)?t.detail:[t.detail],h=await f(B);e.props.value=e.props.value?[...e.props.value,...h]:h,e.dispatch("upload",h),e.dispatch("change",e.props.value)}}})}};C(G,l=>{e.shared.interactive&&a($)?l(U):l(z,!1)})}S(i,p)},$$slots:{default:!0}})}E()}export{qe as BaseExample,D as BaseGallery,Re as default};
