import{p as Q,d as ft,i as C,e as Et,a as A,c as it,t as _t,q as Bt,m as Ht}from"./i18n-CLA-aXfX.js";import{n as W,b as c,p as gt,R as Dt,ac as It,i as s,m as q,l as U,d as E,a as mt,f as B,h as k,s as S,j as y,t as O,Q as R,k as ct,e as P,c as wt,g as V,X as rt,U as K,r as _}from"./index-zQcUQ9m1.js";import{h as St}from"./html-B3q7QijE.js";import{t as ot,s as Ut,f as pt}from"./index-B7oLUUy4.js";import{s as Xt}from"./event-modifiers-CdEA5IGF.js";/* empty css                                                        */import{A as Ft}from"./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js";/* empty css                                                   */import{s as Pt}from"./index-CDsfLiji.js";var Rt=W('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6L8 10L12 6"></path></svg>');function Nt(o){var t=Rt();c(o,t)}var Yt=W('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"></path></svg>');function Ot(o){var t=Yt();c(o,t)}var Qt=W('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"></path></svg>');function Vt(o){var t=Qt();c(o,t)}var Wt=W('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>');function Gt(o){var t=Wt();c(o,t)}var Jt=W('<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg>');function Kt(o){var t=Jt();c(o,t)}const Zt=(o,t=location.href)=>{try{return!!o&&new URL(o).origin!==new URL(t).origin}catch{return!1}};function ht(o){const t=new Ft,l=new DOMParser().parseFromString(o,"text/html");return xt(l.body,"A",a=>{a instanceof HTMLElement&&"target"in a&&Zt(a.getAttribute("href"),location.href)&&(a.setAttribute("target","_blank"),a.setAttribute("rel","noopener noreferrer"))}),t.sanitize(l).body.innerHTML}function xt(o,t,l){o&&(o.nodeName===t||typeof t=="function")&&l(o);const a=o?.childNodes||[];for(let p=0;p<a.length;p++)xt(a[p],t,l)}var te=B('<span class="toast-count svelte-irmu64"> </span>'),ee=B('<div class="toast-separator svelte-irmu64"></div>'),se=B('<div><div data-testid="toast-text"><!></div></div> <!>',1),ne=B('<div class="toast-messages svelte-irmu64"></div>'),ae=B("<div></div>"),re=B('<div role="status" aria-live="polite" data-testid="toast-body"><div class="toast-header svelte-irmu64" role="button" tabindex="0"><div><!></div> <div class="toast-title-row svelte-irmu64"><span> <!></span> <div><!></div></div> <button type="button" aria-label="Close" data-testid="toast-close"><span aria-hidden="true">&#215;</span></button></div> <!> <!></div>');function oe(o,t){gt(t,!1);const l=q(),a=q(),p=q(),v=q(),m=q();let i=Q(t,"type",12),u=Q(t,"messages",28,()=>[]),w=Q(t,"expanded",12,!0);const L=Dt();let b=0,x=0,h=q(0),H=!1,r=q();function n(){L("toggle")}function f(){u().forEach(e=>{L("close",e.id)})}function M(e){b=e.touches[0].clientX,x=e.touches[0].clientY,H=!0}function D(e){if(!H)return;const d=e.touches[0].clientX,$=e.touches[0].clientY,j=d-b,X=$-x;Math.abs(j)>Math.abs(X)&&Math.abs(j)>10&&(e.preventDefault(),y(h,j))}function kt(){H&&(Math.abs(s(h))>100?f():y(h,0),H=!1)}It(()=>{s(v)&&u().length===1&&setTimeout(f,s(a).duration*1e3)}),U(()=>E(u()),()=>{y(l,u().length)}),U(()=>E(u()),()=>{y(a,u()[0])}),U(()=>E(i()),()=>{y(p,i().charAt(0).toUpperCase()+i().slice(1))}),U(()=>s(a),()=>{y(v,s(a)?.duration!==null)}),U(()=>(s(v),s(a)),()=>{y(m,s(v)?`${s(a).duration}s`:"0s")}),mt();var yt={get type(){return i()},set type(e){i(e),V()},get messages(){return u()},set messages(e){u(e),V()},get expanded(){return w()},set expanded(e){w(e),V()}};ft();var g=re(),N=k(g),G=k(N),bt=k(G);{var Mt=e=>{Kt(e)},$t=e=>{var d=rt(),$=K(d);{var j=z=>{Vt(z)},X=z=>{var I=rt(),Y=K(I);{var et=T=>{Gt(T)},st=T=>{var F=rt(),nt=K(F);{var qt=at=>{Ot(at)};C(nt,at=>{i()==="error"&&at(qt)},!0)}c(T,F)};C(Y,T=>{i()==="success"?T(et):T(st,!1)},!0)}c(z,I)};C($,z=>{i()==="info"?z(j):z(X,!1)},!0)}c(e,d)};C(bt,e=>{i()==="warning"?e(Mt):e($t,!1)})}_(G);var Z=S(G,2),J=k(Z),lt=k(J),zt=S(lt);{var Lt=e=>{var d=te(),$=k(d);_(d),O(()=>ct($,`(${s(l)??""})`)),c(e,d)};C(zt,e=>{s(l)>1&&e(Lt)})}_(J);var tt=S(J,2);let ut;var jt=k(tt);Nt(jt),_(tt),_(Z);var dt=S(Z,2);_(N);var vt=S(N,2);{var Tt=e=>{var d=ne();_t(d,7,u,$=>$.id,($,j,X)=>{var z=se(),I=K(z),Y=k(I),et=k(Y);St(et,()=>(E(ht),s(j),R(()=>ht(s(j).message)))),_(Y),_(I);var st=S(I,2);{var T=F=>{var nt=ee();c(F,nt)};C(st,F=>{E(s(X)),E(u()),R(()=>s(X)<u().length-1)&&F(T)})}O(()=>{A(I,1,`toast-message-item ${i()??""}`,"svelte-irmu64"),A(Y,1,`toast-message-text ${i()??""}`,"svelte-irmu64")}),c($,z)}),_(d),ot(3,d,()=>Ut,()=>({duration:200})),c(e,d)};C(vt,e=>{w()&&e(Tt)})}var Ct=S(vt,2);{var At=e=>{var d=ae();O(()=>{A(d,1,`timer ${i()??""}`,"svelte-irmu64"),it(d,`animation-duration: ${s(m)??""}`)}),c(e,d)};C(Ct,e=>{s(v)&&e(At)})}return _(g),Et(g,e=>y(r,e),()=>s(r)),O(e=>{A(g,1,`toast-body ${i()??""}`,"svelte-irmu64"),it(g,`transform: translateX(${s(h)??""}px); opacity: ${e??""};`),A(G,1,`toast-icon ${i()??""}`,"svelte-irmu64"),A(J,1,`toast-title ${i()??""}`,"svelte-irmu64"),ct(lt,`${s(p)??""} `),ut=A(tt,1,"chevron svelte-irmu64",null,ut,{expanded:w(),visible:s(l)>0}),A(dt,1,`toast-close ${i()??""}`,"svelte-irmu64")},[()=>(s(h),R(()=>1-Math.abs(s(h))/300))]),P("click",dt,Xt(f)),P("click",N,n),P("keydown",N,e=>{(e.key==="Enter"||e.key===" ")&&n()}),P("touchstart",g,M),P("touchmove",g,D),P("touchend",g,kt),ot(1,g,()=>pt,()=>({duration:200,delay:100})),ot(2,g,()=>pt,()=>({duration:200})),c(o,g),wt(yt)}var ie=B('<div class="toast-item svelte-1qhecvt"><!></div>'),le=B('<div class="toast-wrap svelte-1qhecvt"></div>');function me(o,t){gt(t,!1);const l=()=>Ht(i,"$top",a),[a,p]=Bt();let v=Q(t,"messages",28,()=>[]),m=Q(t,"on_close",12);const i=Pt(0,{stiffness:.4,damping:.5});let u=q([]);function w(r){const n=new Map;return r.forEach(f=>{const M=f.type;n.has(M)||n.set(M,{type:f.type,messages:[],expanded:!0}),n.get(M).messages.push(f)}),Array.from(n.values())}function L(r){r.length>0&&"parentIFrame"in window&&window.parentIFrame?.getPageInfo(n=>{n.scrollTop<n.offsetTop?i.set(0):i.set(n.scrollTop-n.offsetTop)})}function b(r){y(u,s(u).map(n=>n.type===r?{...n,expanded:!n.expanded}:n))}U(()=>E(v()),()=>{L(v())}),U(()=>E(v()),()=>{y(u,w(v()))}),mt();var x={get messages(){return v()},set messages(r){v(r),V()},get on_close(){return m()},set on_close(r){m(r),V()}};ft();var h=le();_t(h,5,()=>s(u),r=>r.type,(r,n)=>{var f=ie(),M=k(f);oe(M,{get type(){return s(n),R(()=>s(n).type)},get messages(){return s(n),R(()=>s(n).messages)},get expanded(){return s(n),R(()=>s(n).expanded)},$$events:{toggle:()=>b(s(n).type),close:D=>m()(D.detail)}}),_(f),c(r,f)}),_(h),O(()=>it(h,`--toast-top: ${l()??""}px;`)),c(o,h);var H=wt(x);return p(),H}class we{current={};fn_outputs={};fn_inputs={};pending_outputs=new Map;fn_status={};show_progress={};register(t,l,a,p){this.fn_outputs[t]=l,this.fn_inputs[t]=a,this.show_progress[t]=p}clear(t){t in this.current&&(this.current[t]={})}update(t){this.resolve_args(t).forEach(({id:a,queue_position:p,queue_size:v,eta:m,status:i,message:u,progress:w,stream_state:L,time_limit:b,type:x})=>{this.current[a]={queue:t.queue||!1,queue_size:v,queue_position:p,eta:m,stream_state:L,message:u,progress:w||void 0,status:i,fn_index:t.fn_index,time_limit:b,type:x,show_progress:this.show_progress[t.fn_index]}})}set_status(t,l){this.current[t].status=l}resolve_args(t){const{fn_index:l,status:a,size:p=void 0,position:v=null,eta:m=null,message:i=null,stream_state:u=null,time_limit:w=null,progress_data:L=null}=t,b=this.fn_outputs[l],x=this.fn_status[l],h=this.fn_inputs[l];return b.concat(h).map(r=>{let n;const f=this.pending_outputs.get(r)||0;if(x==="pending"&&a!=="pending"){let D=f-1;this.pending_outputs.set(r,D<0?0:D),n=D>0?"pending":a}else x==="pending"&&a==="pending"?n="pending":x!=="pending"&&a==="pending"?(n="pending",this.pending_outputs.set(r,f+1)):n=a;const M=h.includes(r)&&u?"input":b.includes(r)?"output":"skip";return{id:r,queue_position:v,queue_size:p,eta:m,status:n,message:i,progress:L,stream_state:u,time_limit:w,type:M}}).filter(r=>r.type!=="skip")}}export{we as L,me as T};
