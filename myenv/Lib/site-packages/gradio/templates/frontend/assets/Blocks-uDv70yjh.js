const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ApiDocs-f5iF60JG.js","./i18n-CLA-aXfX.js","./index-zQcUQ9m1.js","./index-CqMwg91u.css","./i18n-Bf8vNdKW.css","./misc-snWqx6W0.js","./clear-DRLFkyZs.js","./Button-CyqmdO7C.js","./Image-4Q0YgCzk.js","./Image-Da_XA0w6.css","./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js","./prism-python-D43YKUi0.js","./MarkdownCode-Di_MGSyc.css","./Button-BZ4d-rtD.css","./IconButtonWrapper-DVQ8sIMc.css","./ImagePreview-CCVfwC4m.css","./index-CDsfLiji.js","./IconButton-B7IBJBO5.js","./svelte-component-BXBUmXeM.js","./Clear-G_Bw7Svf.js","./StreamingBar-K0YZHDYh.css","./Block-DgGHn7bv.js","./input-D71CySwn.js","./html-B3q7QijE.js","./size-DXToHkwE.js","./utils.svelte-DtXXSlyN.js","./state.svelte-5acQ85Ll.js","./index-B7oLUUy4.js","./event-modifiers-CdEA5IGF.js","./index-DiFfV4T0.js","./ApiDocs-YhV7c3aO.css","./ApiRecorder-DCYAmw8N.js","./ApiRecorder-CoSLrx_1.css","./Settings-CELScxkb.js","./Dropdown-Cr0_FhkB.js","./window-D9mIs-QY.js","./BlockTitle-CuzKPIeo.js","./Info-DM2eBECo.js","./MarkdownCode-vmwH67uD.js","./DropdownArrow-DvXZK-yN.js","./Dropdown-CRhvQE-V.css","./Checkbox-DZ7QC2-A.js","./Checkbox-B2BpVHOS.css","./Settings-CLQaonub.css","./Example-BeU1J4ps.css","./Index-BVvaTjHV.js","./Code-DUEBT0r-.js","./Code-wZDUWKrz.css","./Index.svelte_svelte_type_style_lang-C8OjryC4.js","./actions-C-VE6FDE.js","./Check-D17sy-za.js","./Copy-CZzZOXS8.js","./IconButtonWrapper-dc02OfMv.js","./Index-cY7HT1Ac.css","./Index-DP8ihX8q.css","./Example-BK-tWmkG.css","./Example-CgIc4GLa.css"])))=>i.map(i=>d[i]);
import{aU as gt,a4 as ht,aV as vt,q as xe,ay as ke,I as Ee,B as Je,i as u,u as pt,aR as mt,av as bt,o as wt,aW as yt,A as xt,C as kt,D as Ge,p as Ye,aX as Et,X as K,U as q,b,c as Ke,aY as Ct,aE as Lt,af as we,ag as Ne,ah as St,Q as zt,ac as Ot,f as G,h as D,s as m,a9 as Se,t as Z,j as U,aj as _e,k as ue,e as W,aZ as Rt,r as M,$ as Ze}from"./index-zQcUQ9m1.js";import{t as At,u as Dt,i as z,O as $e,p as ye,m as ze,e as Mt,c as We,q as jt,P as Ft,$ as Tt,a as He,b as H,x as Pt,A as Ut}from"./i18n-CLA-aXfX.js";import{h as qt}from"./html-B3q7QijE.js";import{c as ge}from"./svelte-component-BXBUmXeM.js";import{b as It}from"./size-DXToHkwE.js";/* empty css                                                   *//* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js";import{b as Vt}from"./utils.svelte-DtXXSlyN.js";import{L as Bt,T as Gt}from"./state.svelte-5acQ85Ll.js";import{AppTree as Nt}from"./index-DiFfV4T0.js";function fe(o,e=[],s=[],i){var t=gt(),a=ht,d=!t.is_pending();t.update_pending_count(1),a.increment(d);var _=xe;if(_){pt();var g=Je,E=mt(!1);Ee(E)}vt(e,[],s,l=>{_&&(ke(!0),Ee(g));try{for(const v of l)u(v);i(o,...l)}finally{_&&ke(!1),t.update_pending_count(-1),a.decrement(d)}})}function Zt(o,e){let s=null,i=xe;var t;if(xe){s=Je;for(var a=xt(document.head);a!==null&&(a.nodeType!==kt||a.data!==o);)a=Ge(a);if(a===null)ke(!1);else{var d=Ge(a);a.remove(),Ee(d)}}xe||(t=document.head.appendChild(bt()));try{wt(()=>e(t),yt)}finally{i&&(ke(!0),Ee(s))}}function et(o,e){Ye(e,!0);var s,i=Et([async()=>s=await Ct(()=>e.node.component)]),t=K(),a=q(t);fe(a,[i[0]],[()=>e.node&&u(s)],(d,_)=>{var g=E=>{var l=K(),v=q(l);fe(v,[i[0]],[()=>e.node.props.shared_props.visible],(j,h)=>{var I=c=>{var O=K(),C=q(O);fe(C,[i[0]],void 0,F=>{ge(C,()=>u(s).default,(w,p)=>{p(w,{get shared_props(){return e.node.props.shared_props},get props(){return e.node.props.props},children:(ee,te)=>{var y=K(),T=q(y);fe(T,[i[0]],[()=>e.node.children&&e.node.children.length],(ie,se)=>{var pe=ne=>{var re=K(),Ce=q(re);fe(Ce,[i[0]],[()=>e.node.children],(ae,oe)=>{At(ae,17,()=>u(oe),Dt,(Q,Le)=>{et(Q,{get node(){return u(Le)}})})}),b(ne,re)};z(ie,ne=>{u(se)&&ne(pe)})}),b(ee,y)},$$slots:{default:!0}})})}),b(c,O)};z(j,c=>{u(h)&&c(I)})}),b(E,l)};z(d,E=>{u(_)&&E(g)})}),b(o,t),Ke()}const Wt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='576'%20height='576'%20viewBox='0%200%20576%20576'%20fill='none'%3e%3cpath%20d='M287.5%20229L86%20344.5L287.5%20460L489%20344.5L287.5%20229Z'%20stroke='url(%23paint0_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M287.5%20116L86%20231.5L287.5%20347L489%20231.5L287.5%20116Z'%20stroke='url(%23paint1_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M86%20344L288%20229'%20stroke='url(%23paint2_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='bevel'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_7'%20x1='60'%20y1='341'%20x2='429.5'%20y2='344'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_7'%20x1='513.5'%20y1='231'%20x2='143.5'%20y2='231'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_7'%20x1='60'%20y1='344'%20x2='428.987'%20y2='341.811'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Ht="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M26.9425%202.94265C27.4632%202.42195%2027.4632%201.57773%2026.9425%201.05703C26.4218%200.536329%2025.5776%200.536329%2025.0569%201.05703L22.5713%203.54256C21.1213%202.59333%2019.5367%202.43378%2018.1753%202.64006C16.5495%202.88638%2015.1127%203.66838%2014.3905%204.39053L12.3905%206.39053C12.1405%206.64058%2012%206.97972%2012%207.33334C12%207.68697%2012.1405%208.0261%2012.3905%208.27615L19.7239%2015.6095C20.2446%2016.1302%2021.0888%2016.1302%2021.6095%2015.6095L23.6095%2013.6095C24.3316%2012.8873%2025.1136%2011.4505%2025.36%209.82475C25.5663%208.46312%2025.4066%206.87827%2024.4571%205.42807L26.9425%202.94265Z'%20fill='%233c4555'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.276%2012.9426C12.7967%2012.4219%2012.7967%2011.5777%2012.276%2011.057C11.7553%2010.5363%2010.9111%2010.5363%2010.3904%2011.057L8.66651%2012.7809L8.27615%2012.3905C8.0261%2012.1405%207.68697%2012%207.33334%2012C6.97972%2012%206.64058%2012.1405%206.39053%2012.3905L4.39053%2014.3905C3.66838%2015.1127%202.88638%2016.5495%202.64006%2018.1753C2.43377%2019.5367%202.59333%2021.1214%203.54262%2022.5714L1.05703%2025.057C0.536329%2025.5777%200.536329%2026.4219%201.05703%2026.9426C1.57773%2027.4633%202.42195%2027.4633%202.94265%2026.9426L5.42817%2024.4571C6.87835%2025.4066%208.46315%2025.5663%209.82475%2025.36C11.4505%2025.1136%2012.8873%2024.3316%2013.6095%2023.6095L15.6095%2021.6095C16.1302%2021.0888%2016.1302%2020.2446%2015.6095%2019.7239L15.2188%2019.3332L16.9426%2017.6093C17.4633%2017.0886%2017.4633%2016.2444%2016.9426%2015.7237C16.4219%2015.203%2015.5777%2015.203%2015.057%2015.7237L13.3332%2017.4475L10.5521%2014.6665L12.276%2012.9426Z'%20fill='%23FF7C00'/%3e%3c/svg%3e",Qt="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Outer%20gear%20teeth%20(gray)%20--%3e%3cpath%20d='M19.14%2012.94c.04-.3.06-.61.06-.94%200-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24%200-.43.17-.47.41l-.36%202.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47%200-.59.22L2.74%208.87c-.12.21-.08.47.12.61l2.03%201.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03%201.58c-.18.14-.23.41-.12.61l1.92%203.32c.12.22.37.29.59.22l2.39-.96c.5.38%201.03.7%201.62.94l.36%202.54c.05.24.24.41.48.41h3.84c.24%200%20.44-.17.47-.41l.36-2.54c.59-.24%201.13-.56%201.62-.94l2.39.96c.22.08.47%200%20.59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12%2015.6c-1.98%200-3.6-1.62-3.6-3.6s1.62-3.6%203.6-3.6%203.6%201.62%203.6%203.6-1.62%203.6-3.6%203.6z'%20fill='%23808080'/%3e%3c!--%20Inner%20circle%20(now%20gray)%20--%3e%3ccircle%20cx='12'%20cy='12'%20r='2.5'%20fill='%23808080'/%3e%3c/svg%3e",Xt="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3erecord%20[%23982]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-380.000000,%20-3839.000000)'%20fill='%23FF0000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M338,3689%20C338,3691.209%20336.209,3693%20334,3693%20C331.791,3693%20330,3691.209%20330,3689%20C330,3686.791%20331.791,3685%20334,3685%20C336.209,3685%20338,3686.791%20338,3689%20M334,3697%20C329.589,3697%20326,3693.411%20326,3689%20C326,3684.589%20329.589,3681%20334,3681%20C338.411,3681%20342,3684.589%20342,3689%20C342,3693.411%20338.411,3697%20334,3697%20M334,3679%20C328.477,3679%20324,3683.477%20324,3689%20C324,3694.523%20328.477,3699%20334,3699%20C339.523,3699%20344,3694.523%20344,3689%20C344,3683.477%20339.523,3679%20334,3679'%20id='record-[%23982]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";let ve=!1,$=null,Ae=[],Jt=0,he={},Yt,Re,Kt=null,Oe=[];async function $t(){if(!ve)try{const o=document.title;document.title="[Sharing] Gradio Tab";const e=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0,selfBrowserSurface:"include"});document.title=o;const s={videoBitsPerSecond:5e6};$=new MediaRecorder(e,s),Ae=[],he={},$.ondataavailable=ti,$.onstop=ii,$.start(1e3),ve=!0,Jt=Date.now()}catch(o){Re("Recording Error","Failed to start recording: "+o.message,"error")}}function ei(){!ve||!$||($.stop(),ve=!1)}function ti(o){o.data.size>0&&Ae.push(o.data)}function ii(){ve=!1;const o=new Blob(Ae,{type:"video/mp4"});si(o),($?.stream?.getTracks()||[]).forEach(s=>s.stop())}async function si(o){try{Re("Processing video","This may take a few seconds...","info");const e=new FormData;e.append("video",o,"recording.mp4"),he.start!==void 0&&he.end!==void 0&&(e.append("remove_segment_start",he.start.toString()),e.append("remove_segment_end",he.end.toString())),Oe.length>0&&e.append("zoom_effects",JSON.stringify(Oe));const s=await fetch(Yt+"/gradio_api/process_recording",{method:"POST",body:e});if(!s.ok)throw new Error(`Server returned ${s.status}: ${s.statusText}`);const i=await s.blob(),t=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;Qe(i,t),Oe=[]}catch{Re("Processing Error","Failed to process recording. Saving original version.","warning");const s=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;Qe(o,s)}}function Qe(o,e){const s=URL.createObjectURL(o),i=document.createElement("a");i.style.display="none",i.href=s,i.download=e,document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),URL.revokeObjectURL(s)},100)}const ai=/^'([^]+)'$/,Xe=Symbol("NOVALUE");class ni{id;inputs;outputs;cancels;pending=!1;trigger_modes;event_args={};targets=[];connection_type;triggers=[];original_trigger_id=null;show_progress_on=null;component_prop_inputs=[];show_progress;functions;constructor(e){this.id=e.id,this.original_trigger_id=e.id,this.inputs=e.inputs,this.outputs=e.outputs,this.connection_type=e.connection,this.show_progress=e.show_progress,this.functions={frontend:e.js?li(e.js,e.backend_fn,e.inputs.length,e.outputs.length):void 0,backend:e.backend_fn,backend_js:e.js_implementation?new $e(`let result = await (${e.js_implementation})(...arguments);
						return (!Array.isArray(result)) ? [result] : result;`):void 0},this.targets=e.targets,this.cancels=e.cancels,this.trigger_modes=e.trigger_mode,this.show_progress_on=e.show_progress_on||null,this.component_prop_inputs=e.component_prop_inputs||[];for(let s=0;s<e.event_specific_args?.length;s++){const i=e.event_specific_args[s];this.event_args[i]=e[i]??null}}async run(e,s,i,t){let a=s;return this.functions.backend_js?{type:"data",data:await this.functions.backend_js(...a)}:(this.functions.frontend&&(a=await this.functions.frontend(s)),this.functions.backend?{type:"submit",data:e.submit(this.id,a,i,t)}:this.functions.frontend?{type:"data",data:a}:{type:"void",data:null})}add_trigger(e,s){this.triggers.push([e,s])}get_triggers(){return{success:this.triggers.filter(([,e])=>e==="success").map(([e])=>e),failure:this.triggers.filter(([,e])=>e==="failure").map(([e])=>e),all:this.triggers.filter(([,e])=>e==="all").map(([e])=>e)}}}class ri{dependencies_by_fn=new Map;dependencies_by_event=new Map;render_id_deps=new Map;submissions=new Map;client;queue=new Set;add_to_api_calls;update_state_cb;get_state_cb;rerender_cb;log_cb;loading_stati=new Bt;constructor(e,s,i,t,a,d,_){this.add_to_api_calls=_,this.log_cb=d,this.update_state_cb=i,this.get_state_cb=t,this.rerender_cb=a,this.reload(e,i,t,a,s)}reload(e,s,i,t,a){const{by_id:d,by_event:_}=this.create(e);this.dependencies_by_event=_,this.dependencies_by_fn=d,this.client=a,this.update_state_cb=s,this.get_state_cb=i,this.rerender_cb=t;for(const[g,E]of this.dependencies_by_fn)for(const[l]of E.targets)this.set_event_args(l,E.event_args);this.register_loading_stati(d)}register_loading_stati(e){for(const[s,i]of e)this.loading_stati.register(i.id,i.show_progress_on||i.outputs,i.inputs,i.show_progress)}clear_loading_status(e){this.loading_stati.clear(e)}async update_loading_stati_state(){for(const[e,s]of Object.entries(this.loading_stati.current))this.update_state_cb(Number(e),{loading_status:s},!1)}dispatch_state_change_events(e){if(e.changed_state_ids)for(const s of e.changed_state_ids)this.dependencies_by_event.get("change-"+s)?.forEach(t=>{this.dispatch({type:"fn",fn_index:t.id,target_id:s,event_data:null})})}async dispatch(e){let s;if(e.type==="fn"){const i=this.dependencies_by_fn.get(e.fn_index);i&&(s=[i])}else s=this.dependencies_by_event.get(`${e.event_name}-${e.target_id}`);for(let i=0;i<(s?.length||0);i++){const t=s?s[i]:void 0;if(t){this.cancel(t.cancels);const a=di(t.trigger_modes,this.submissions.has(t.id));if(a==="skip")continue;if(a==="defer"){this.queue.add(t.id);continue}t.functions.backend&&(this.loading_stati.update({status:"pending",fn_index:t.id,stream_state:null}),this.update_loading_stati_state());const d=await this.gather_state(t.inputs,t.component_prop_inputs),_=await Promise.all(t.targets.map(([v])=>this.set_event_args(v,t.event_args))),{success:g,failure:E,all:l}=t.get_triggers();try{let v=null;if(e.target_id!==void 0||e.type==="event"?v=e.target_id||null:v=t.original_trigger_id,t.connection_type==="stream"&&this.submissions.has(t.id)){const h=this.submissions.get(t.id);let I={fn_index:t.id,data:d,event_data:e.event_data};h.send_chunk(I),_.forEach(c=>c());continue}this.add_to_api_calls({fn_index:t.id,data:d,event_data:e.event_data,trigger_id:v});const j=await t.run(this.client,d,e.event_data,v);if(j.type==="void")_.forEach(h=>h());else if(j.type==="data")await this.handle_data(t.outputs,j.data),_.forEach(h=>h());else{let h=null;t.connection_type==="stream"&&!this.submissions.has(t.id)&&(h="waiting"),this.submissions.set(t.id,j.data);let I=0;e:for await(const c of j.data)if(I===0&&t.inputs.forEach(O=>{this.update_state_cb(O,{loading_status:{validation_error:null}},!1)}),I+=1,c!==null){if(c.type==="data"&&await this.handle_data(t.outputs,c.data),c.type==="status"){c.original_msg==="process_starts"&&t.connection_type==="stream"&&(h="open");const{fn_index:O,...C}=c;if(c.stage==="complete"){h="closed",g.forEach(F=>{this.dispatch({type:"fn",fn_index:F,event_data:null,target_id:v})}),this.dispatch_state_change_events(c),this.loading_stati.update({...C,status:C.stage,fn_index:t.id,stream_state:h}),this.update_loading_stati_state();break e}else if(c.stage==="generating")this.dispatch_state_change_events(c),this.loading_stati.update({...C,status:C.stage,fn_index:t.id,stream_state:h}),this.update_loading_stati_state();else if(c.stage==="error"){if(Array.isArray(c?.message)){c.message.forEach((w,p)=>{this.update_state_cb(t.inputs[p],{loading_status:{validation_error:w.is_valid?null:w.message,show_validation_error:!0}},!1)}),t.outputs.forEach(w=>{t.inputs.includes(w)||this.update_state_cb(w,{loading_status:{status:null}},!1)}),_.forEach(w=>w()),this.submissions.delete(t.id),this.queue.has(t.id)&&(this.queue.delete(t.id),this.dispatch(e));return}const F=c?.message?.replace(ai,(w,p)=>p);throw this.log_cb(c._title??"Error",F,O,"error",C.duration,C.visible),new Error("Dependency function failed")}else this.loading_stati.update({...C,status:C.stage,fn_index:t.id,stream_state:h}),this.update_loading_stati_state()}if(c.type==="render"){this.loading_stati.update({status:"complete",fn_index:t.id,stream_state:null}),this.update_loading_stati_state();const{layout:O,components:C,render_id:F,dependencies:w}=c.data;this.rerender_cb(C,O);const{by_id:p,by_event:ee}=this.create(w);this.register_loading_stati(p),p.forEach(y=>this.dependencies_by_fn.set(y.id,y)),ee.forEach((y,T)=>this.dependencies_by_event.set(T,y));const te=this.render_id_deps.get(F);te&&te.forEach(y=>{p.has(y)||this.dependencies_by_fn.delete(y)}),this.render_id_deps.set(F,new Set(Array.from(p.keys()))),this.register_loading_stati(p);break e}c.type==="log"&&this.handle_log(c)}l.forEach(c=>{this.dispatch({type:"fn",fn_index:c,event_data:null,target_id:v})}),_.forEach(c=>c()),this.submissions.delete(t.id),this.queue.has(t.id)&&(this.queue.delete(t.id),this.dispatch(e))}}catch{this.loading_stati.update({status:"error",fn_index:t.id,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(t.id),E.forEach(j=>{this.dispatch({type:"fn",fn_index:j,event_data:null})})}}}}create(e){const s=new Map,i=new Map,t=[];for(const a of e){const d=new ni(a);for(const[_,g]of a.targets)i.has(`${g}-${_}`)||i.set(`${g}-${_}`,[]),i.get(`${g}-${_}`)?.push(d);if(s.set(a.id,d),a.trigger_after!==void 0){const _=a.trigger_only_on_failure?"failure":a.trigger_only_on_success?"success":"all";t.push([a.id,a.trigger_after,_])}}for(const[a,d,_]of t){const g=s.get(d);g&&(g.add_trigger(a,_),g.original_trigger_id=ci(e,d))}return{by_id:s,by_event:i}}handle_log(e){const{title:s,log:i,fn_index:t,level:a,duration:d,visible:_}=e;this.log_cb(s,i,t,a,d,_)}async handle_data(e,s){await Promise.all(e.map(async(i,t)=>{const a=s[t]===void 0?Xe:s[t];if(a!==Xe)if(oi(a)){let d=!1,_=null;for(const[g,E]of Object.entries(a))if(g!=="__type__"){if(g==="visible"){d=!0,_=E;continue}await this.update_state_cb(e[t],{[g]:E},!1)}d&&await this.update_state_cb(e[t],{visible:_},!0)}else await this.update_state_cb(i,{value:a},!1)}))}async gather_state(e,s=[]){return(await Promise.all(e.map(i=>this.get_state_cb(i)))).map((i,t)=>s.includes(t)?i??null:i?.value??null)}async set_event_args(e,s){let i={};const t=await this.get_state_cb?.(e);if(!t)return()=>{};for(const[a]of Object.entries(s))i[a]=t?.[a]??null;return Object.keys(s).length===0?()=>{}:(await this.update_state_cb(e,s,!1),()=>{this.update_state_cb(e,i,!1)})}async cancel(e){if(e)for(const s of e){const i=this.submissions.get(s);i&&(await i.cancel(),this.submissions.delete(s))}}dispatch_load_events(){this.dependencies_by_fn.forEach(e=>{e.targets.forEach(([s,i])=>{i==="load"&&this.dispatch({type:"fn",fn_index:e.id,event_data:null,target_id:s})})})}get_fns_from_targets(e){const s=[];return this.dependencies_by_event.forEach((i,t)=>{const[,a]=t.split("-");Number(a)===e&&i.forEach(d=>{s.push(d.id)})}),s}close_stream(e){const s=this.get_fns_from_targets(e);for(const i of s){const t=this.submissions.get(i);t&&(t.close_stream(),this.submissions.delete(i)),this.loading_stati.update({status:"complete",fn_index:i,eta:0,queue:!1,stream_state:"closed"})}this.update_loading_stati_state()}}function oi(o){return typeof o=="object"&&o!==null&&"__type__"in o&&o?.__type__==="update"}function di(o,e){return e?o==="always_last"?"defer":o==="multiple"?"run":o==="once"?"skip":"run":"run"}function li(o,e,s,i){const t=e?s===1:i===1;try{return new $e("__fn_args",`  let result = await (${o})(...__fn_args);
  if (typeof result === "undefined") return [];
  return (${t} && !Array.isArray(result)) ? [result] : result;`)}catch(a){throw a}}function ci(o,e){let s=new Map,i=e,t=0;for(;t<100;){const a=s.get(i)||o.find(d=>d.id===i);if(!a||(s.set(a.id,a),a.trigger_after===null||a.trigger_after===void 0))break;i=a.trigger_after,t+=1}return i}var _i=G("<!> <!>",1),ui=G('<button class="show-api svelte-zxu34v"><!> <img class="svelte-zxu34v"/></button>'),fi=G('<div class="divider show-api-divider svelte-zxu34v">·</div> <a href="https://gradio.app" class="built-with svelte-zxu34v" target="_blank" rel="noreferrer"> <img class="svelte-zxu34v"/></a>',1),gi=G('<div>·</div> <button class="settings svelte-zxu34v"> <img class="svelte-zxu34v"/></button>',1),hi=G('<footer class="svelte-zxu34v"><!> <!> <button> <img class="svelte-zxu34v"/></button> <div class="divider svelte-zxu34v">·</div> <!></footer>'),vi=G('<div id="api-recorder-container" class="svelte-zxu34v"><!></div>'),pi=G('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),mi=G('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),bi=G('<div class="wrap svelte-zxu34v"><div class="contain svelte-zxu34v"><!> <!></div> <!> <!> <!> <!></div> <!>',1);function wi(o,e){Ye(e,!0);const s=()=>ze(Ft,"$reactive_formatter",a),i=()=>ze(Tt,"$_",a),t=()=>ze(tt,"$is_screen_recording",a),[a,d]=jt();ye(e,"render_complete",3,!1);let _=ye(e,"ready",15,!1),g=ye(e,"reload_count",11,0),E=ye(e,"add_new_message",15);e.components.forEach(n=>{n.props.i18n||(n.props.i18n=s())});let l=new Nt(e.components,e.layout,e.dependencies,{root:e.root,theme:e.theme_mode,version:e.version,api_prefix:e.api_prefix,max_file_size:e.max_file_size,autoscroll:e.autoscroll},e.app,s());Lt(Vt,{register:l.register_component.bind(l),dispatcher:j});let v=we(Ne([]));function j(n,r,f){if(r==="share"){const{title:x,description:L}=f}else r==="error"?Q("Error",f,-1,r,10,!0):r==="warning"?Q("Warning",f,-1,r,10,!0):r==="info"?Q("Info",f,-1,r,10,!0):r=="clear_status"?(l.update_state(n,{loading_status:{}},!1),O.clear_loading_status(n)):r=="close_stream"?O.close_stream(n):(r==="select"&&n in l.initial_tabs&&(n=f.id),O.dispatch({type:"event",event_name:r,target_id:n,event_data:f}))}let h=we(Ne([])),I=we(null),c=n=>{U(I,n,!0),u(p)&&U(h,[...u(h),u(I)],!0)},O=new ri(e.dependencies,e.app,l.update_state.bind(l),l.get_state.bind(l),l.rerender.bind(l),Q,c);St(()=>{g(),zt(()=>{l.reload(e.components,e.layout,e.dependencies,{root:e.root,theme:e.theme_mode,version:e.version,api_prefix:e.api_prefix,max_file_size:e.max_file_size,autoscroll:e.autoscroll}),O.reload(e.dependencies,l.update_state.bind(l),l.get_state.bind(l),l.rerender.bind(l),e.app)})});let C=350,F=Se(()=>e.search_params.get("view")==="api"&&e.footer_links.includes("api")),w=Se(()=>e.search_params.get("view")==="settings"),p=Se(()=>e.search_params.get("view")==="api-recorder"&&e.footer_links.includes("api")),ee=!0,te=!0,y=null,T=null,ie=null,se=we(null);async function pe(){if(!y||!T){const n=await _e(()=>import("./ApiDocs-f5iF60JG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url),r=await _e(()=>import("./ApiRecorder-DCYAmw8N.js"),__vite__mapDeps([31,1,2,3,4,7,5,8,9,10,11,12,13,14,15,32]),import.meta.url);y||(y=n.default),T||(T=r.default)}}async function ne(){T||(T=(await _e(()=>import("./ApiRecorder-DCYAmw8N.js"),__vite__mapDeps([31,1,2,3,4,7,5,8,9,10,11,12,13,14,15,32]),import.meta.url)).default)}async function re(){ie||(ie=(await _e(()=>import("./Settings-CELScxkb.js"),__vite__mapDeps([33,1,2,3,4,5,6,10,11,12,34,22,27,16,17,18,14,19,20,35,28,36,37,38,23,39,40,41,25,42,24,26,29,43,44]),import.meta.url)).default)}async function Ce(){if(!u(se)){const n=await _e(()=>import("./Index-BVvaTjHV.js"),__vite__mapDeps([45,1,2,3,4,22,10,11,12,46,47,48,49,25,50,51,38,23,17,18,5,14,52,53,54,20,55,56]),import.meta.url);U(se,n.default,!0)}}async function ae(n){U(p,!1),n&&await pe(),U(F,n);let r=new URLSearchParams(window.location.search);n?r.set("view","api"):r.delete("view"),history.replaceState(null,"","?"+r.toString())}async function oe(n){n&&await re();let r=new URLSearchParams(window.location.search);n?r.set("view","settings"):r.delete("view"),history.replaceState(null,"","?"+r.toString()),U(w,!u(w))}function Q(n,r,f,x,L=10,V=!1){V&&u(v).push({title:n,message:r,fn_index:f,type:x,id:++Le,duration:L,visible:V})}E(Q);let Le=-1;i()("blocks.long_requests_queue"),i()("blocks.connection_can_break"),i()("blocks.waiting_for_inputs");let tt=Pt(!1),De=0,de;function Me(){if("parentIFrame"in window){const n=de.children[0].getBoundingClientRect();if(!n)return;window.parentIFrame?.size(n.bottom+De+32)}}function je(){t()?ei():$t()}Ot(()=>{"parentIFrame"in window&&window.parentIFrame?.autoResize(!1);const n=new MutationObserver(Me),r=new ResizeObserver(Me);return n.observe(de,{childList:!0,subtree:!0,attributes:!0}),r.observe(de),l.ready.then(()=>{_(!0),O.dispatch_load_events()}),e.vibe_mode&&Ce(),()=>{n.disconnect(),r.disconnect()}});function it(n){U(v,u(v).filter(r=>r.id!==n),!0)}var Fe=bi();Zt("zxu34v",n=>{var r=_i(),f=q(r);{var x=k=>{Z(()=>{Rt.title=e.title??""},void 0,void 0,void 0,!0)};z(f,k=>{e.control_page_title&&k(x)})}var L=m(f,2);{var V=k=>{var P=K(),be=q(P);qt(be,()=>`<style>${Ut(e.css,e.version)}</style>`),b(k,P)};z(L,k=>{e.css&&k(V)})}b(n,r)});var me=q(Fe);let Te;var le=D(me);let Pe;var Ue=D(le);et(Ue,{get node(){return l.root}});var st=m(Ue,2);{var at=n=>{var r=hi(),f=D(r);{var x=S=>{var R=ui(),N=D(R);{var X=A=>{var Y=Ze();Z(ce=>ue(Y,ce),[()=>i()("errors.use_via_api_or_mcp")]),b(A,Y)},B=A=>{var Y=Ze();Z(ce=>ue(Y,ce),[()=>i()("errors.use_via_api")]),b(A,Y)};z(N,A=>{e.app.config?.mcp_server?A(X):A(B,!1)})}var J=m(N,2);M(R),Z(A=>{H(J,"src",Ht),H(J,"alt",A)},[()=>i()("common.logo")]),W("click",R,()=>{ae(!u(F))}),W("mouseenter",R,()=>{pe(),ne()}),b(S,R)};z(f,S=>{e.footer_links.includes("api")&&S(x)})}var L=m(f,2);{var V=S=>{var R=fi(),N=m(q(R),2),X=D(N),B=m(X);M(N),Z((J,A)=>{ue(X,`${J??""} `),H(B,"src",Wt),H(B,"alt",A)},[()=>i()("common.built_with_gradio"),()=>i()("common.logo")]),b(S,R)};z(L,S=>{e.footer_links.includes("gradio")&&S(V)})}var k=m(L,2);let P;var be=D(k),Be=m(be);M(k);var ut=m(k,4);{var ft=S=>{var R=gi(),N=q(R);let X;var B=m(N,2),J=D(B),A=m(J);M(B),Z((Y,ce)=>{X=He(N,1,"divider svelte-zxu34v",null,X,{hidden:!t()}),ue(J,`${Y??""} `),H(A,"src",Qt),H(A,"alt",ce)},[()=>i()("common.settings"),()=>i()("common.settings")]),W("click",B,()=>{oe(!u(w))}),W("mouseenter",B,()=>{re()}),b(S,R)};z(ut,S=>{e.footer_links.includes("settings")&&S(ft)})}M(r),Z((S,R)=>{P=He(k,1,"record svelte-zxu34v",null,P,{hidden:!t()}),ue(be,`${S??""} `),H(Be,"src",Xt),H(Be,"alt",R)},[()=>i()("common.stop_recording"),()=>i()("common.stop_recording")]),W("click",k,()=>{je()}),It(r,"clientHeight",S=>De=S),b(n,r)};z(st,n=>{e.footer_links.length>0&&n(at)})}M(le),Mt(le,n=>de=n,()=>de);var qe=m(le,2);{var nt=n=>{var r=vi(),f=D(r);ge(f,()=>T,(x,L)=>{L(x,{get api_calls(){return u(h)},get dependencies(){return e.dependencies}})}),M(r),W("click",r,()=>{ae(!0),U(p,!1)}),b(n,r)};z(qe,n=>{u(p)&&T&&n(nt)})}var Ie=m(qe,2);{var rt=n=>{var r=pi(),f=D(r),x=m(f,2),L=D(x);ge(L,()=>y,(V,k)=>{k(V,{get root_node(){return l.root},get dependencies(){return e.dependencies},get root(){return e.root},get app(){return e.app},get space_id(){return e.space_id},get api_calls(){return u(h)},get username(){return e.username},get last_api_call(){return u(I)},$$events:{close:P=>{ae(!1),U(h,[],!0),U(p,U(p,P.detail?.api_recorder_visible))}}})}),M(x),M(r),W("click",f,()=>{ae(!1)}),b(n,r)};z(Ie,n=>{u(F)&&l.root&&y&&n(rt)})}var Ve=m(Ie,2);{var ot=n=>{var r=mi(),f=D(r),x=m(f,2),L=D(x);ge(L,()=>ie,(V,k)=>{k(V,{get pwa_enabled(){return e.app.config.pwa},get root(){return e.root},get space_id(){return e.space_id},get allow_zoom(){return ee},set allow_zoom(P){ee=P},get allow_video_trim(){return te},set allow_video_trim(P){te=P},$$events:{close:()=>{oe(!1)},start_recording:()=>{je()}}})}),M(x),M(r),W("click",f,()=>{oe(!1)}),b(n,r)};z(Ve,n=>{u(w)&&e.app.config&&l.root&&ie&&n(ot)})}var dt=m(Ve,2);{var lt=n=>{var r=K(),f=q(r);ge(f,()=>u(se),(x,L)=>{L(x,{get app(){return e.app},get root(){return e.root}})}),b(n,r)};z(dt,n=>{e.vibe_mode&&u(se)&&n(lt)})}M(me);var ct=m(me,2);{var _t=n=>{Gt(n,{get messages(){return u(v)},on_close:it})};z(ct,n=>{u(v)&&n(_t)})}Z(()=>{Te=We(me,"",Te,{"min-height":e.app_mode?"100%":"auto"}),Pe=We(le,"",Pe,{"flex-grow":e.app_mode?"1":"auto","margin-right":e.vibe_mode?`${C}px`:"0"})}),b(o,Fe),Ke(),d()}const Di=Object.freeze(Object.defineProperty({__proto__:null,default:wi},Symbol.toStringTag,{value:"Module"}));export{Di as B,Ht as a,Qt as s};
