const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./module-FFb15TvM.js","./module-BTkNA4K1.js","./module-8x-imyhh.js"])))=>i.map(i=>d[i]);
import{p as n,d as Ie,i as ee,t as ct,u as _t,e as pe,a as He,c as gt,j as mt,b as vt,s as pt,f as ft,g as Je}from"./i18n-CLA-aXfX.js";import{p as Ee,R as Ne,l as ie,d as y,a as Le,f as G,h as U,Q as I,r as L,t as le,b as M,c as Se,g as l,k as ne,X as De,U as ce,i as e,ac as qe,ai as st,m as D,j as _,s as z,e as ye,az as N,aS as ht,V as Pe,aj as Ke,aB as wt,af as Ze,ag as bt,ah as yt,_ as xt,a9 as he}from"./index-zQcUQ9m1.js";import{f as ve,G as Rt}from"./utils.svelte-DtXXSlyN.js";import{S as $e}from"./index-CDsfLiji.js";/* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js";/* empty css                                                   */import{W as kt,A as Pt,S as At}from"./StaticAudio-BlcLA6BM.js";import{b as ke}from"./misc-snWqx6W0.js";import{U as Dt}from"./Upload-BKx5p3GO.js";import{M as et}from"./ModifyUpload-_NXBf0nx.js";/* empty css                                             */import{B as Et}from"./BlockLabel-BmXTkHTt.js";import{M as St}from"./Music-Dyf3R8ai.js";import{S as Bt}from"./SelectSource-AYQ6Efwp.js";import{S as jt}from"./StreamingBar-qOcZaUMs.js";import{s as tt,u as Ve,p as rt}from"./MinimalAudioPlayer-CX04FWPU.js";import{o as Fe}from"./InteractiveAudio.svelte_svelte_type_style_lang-DjdIbtc4.js";import{P as Mt}from"./Trim-DvpdrBte.js";import{S as Ct}from"./Spinner-9vNbv65E.js";import{B as at}from"./Block-DgGHn7bv.js";import{U as It}from"./UploadText-CdWhf1vX.js";import{default as Jr}from"./Example-Dz5wwKmI.js";import"./IconButton-B7IBJBO5.js";import"./svelte-component-BXBUmXeM.js";import"./Clear-G_Bw7Svf.js";import"./prism-python-D43YKUi0.js";import"./DownloadLink-DaQ_7WnR.js";import"./Empty-BZ_-KNsK.js";import"./ShareButton-_eP1IUQf.js";import"./Download-X4TzKHZY.js";import"./IconButtonWrapper-dc02OfMv.js";import"./Play-BMqghMO0.js";import"./Undo-B0i5SYxj.js";import"./actions-C-VE6FDE.js";import"./props-CKo_ykv6.js";import"./utils-BsTlurbm.js";import"./Edit-iP6wpb5V.js";import"./ImagePaste-DZGLPUuh.js";import"./Microphone-Bo8Iyiy1.js";import"./Upload-C3qqF65G.js";/* empty css                                              */var zt=G("<option> </option>"),Ut=G("<option> </option>"),Lt=G('<select class="mic-select svelte-ym1wxn" aria-label="Select input device"><!></select>');function it(ae,a){Ee(a,!1);let o=n(a,"i18n",12),u=n(a,"micDevices",28,()=>[]);const h=Ne();ie(()=>y(o()),()=>{if(typeof window<"u")try{let g=[];Fe.getAvailableAudioDevices().then(s=>{u(s),s.forEach(v=>{v.deviceId&&g.push(v)}),u(g)})}catch(g){throw g instanceof DOMException&&g.name=="NotAllowedError"&&h("error",o()("audio.allow_recording_access")),g}}),Le();var t={get i18n(){return o()},set i18n(g){o(g),l()},get micDevices(){return u()},set micDevices(g){u(g),l()}};Ie();var m=Lt(),E=U(m);{var S=g=>{var s=zt(),v=U(s,!0);L(s),s.value=s.__value="",le(b=>ne(v,b),[()=>(y(o()),I(()=>o()("audio.no_microphone")))]),M(g,s)},w=g=>{var s=De(),v=ce(s);ct(v,1,u,_t,(b,x)=>{var A=Ut(),B=U(A,!0);L(A);var j={};le(()=>{ne(B,(e(x),I(()=>e(x).label))),j!==(j=(e(x),I(()=>e(x).deviceId)))&&(A.value=(A.__value=(e(x),I(()=>e(x).deviceId)))??"")}),M(b,A)}),M(g,s)};ee(E,g=>{y(u()),I(()=>u().length===0)?g(S):g(w,!1)})}return L(m),le(()=>m.disabled=(y(u()),I(()=>u().length===0))),M(ae,m),Se(t)}var qt=G('<time class="duration-button duration svelte-1xuh0j1"> </time>'),Tt=G('<div class="controls svelte-1xuh0j1"><div class="wrapper svelte-1xuh0j1"><button class="record record-button svelte-1xuh0j1"> </button> <button> </button> <button id="stop-paused" class="stop-button-paused svelte-1xuh0j1"> </button> <button aria-label="pause" class="pause-button svelte-1xuh0j1"><!></button> <button class="resume-button svelte-1xuh0j1"> </button> <!></div> <!></div>');function Wt(ae,a){Ee(a,!1);let o=n(a,"record",12),u=n(a,"i18n",12),h=n(a,"recording",12,!1),t=D([]),m=D(),E=D(),S=D(),w=D(),g=D(),s=D(!1),v=n(a,"record_time",12),b=n(a,"show_recording_waveform",12),x=n(a,"timing",12,!1);const A=()=>{N(m,e(m).style.display="none"),N(w,e(w).style.display="flex"),N(E,e(E).style.display="block")},B=()=>{o().isPaused()&&(o().resumeRecording(),o().stopRecording()),o().stopMic(),N(m,e(m).style.display="flex"),N(w,e(w).style.display="none"),N(E,e(E).style.display="none"),N(m,e(m).disabled=!1)},j=()=>{N(E,e(E).style.display="none"),N(S,e(S).style.display="block"),N(w,e(w).style.display="none"),N(g,e(g).style.display="flex")},V=()=>{N(E,e(E).style.display="block"),N(S,e(S).style.display="none"),N(m,e(m).style.display="none"),N(w,e(w).style.display="flex"),N(g,e(g).style.display="none")};qe(()=>{o().on("record-start",A),o().on("record-end",B),o().on("record-pause",j),o().on("record-resume",V)}),st(()=>{o().un("record-start",A),o().un("record-end",B),o().un("record-pause",j),o().un("record-resume",V)}),ie(()=>(y(h()),e(s),y(o())),()=>{h()&&!e(s)?o().startMic().then(()=>{o().startRecording(),_(s,!0)}):!h()&&e(s)&&(o().isPaused()&&o().resumeRecording(),o().stopRecording(),_(s,!1))}),Le();var te={get record(){return o()},set record(f){o(f),l()},get i18n(){return u()},set i18n(f){u(f),l()},get recording(){return h()},set recording(f){h(f),l()},get record_time(){return v()},set record_time(f){v(f),l()},get show_recording_waveform(){return b()},set show_recording_waveform(f){b(f),l()},get timing(){return x()},set timing(f){x(f),l()}};Ie();var T=Tt(),Q=U(T),R=U(Q),W=U(R,!0);L(R),pe(R,f=>_(m,f),()=>e(m));var d=z(R,2),p=U(d,!0);L(d),pe(d,f=>_(w,f),()=>e(w));var q=z(d,2),O=U(q,!0);L(q),pe(q,f=>_(g,f),()=>e(g));var H=z(q,2),F=U(H);Mt(F),L(H),pe(H,f=>_(E,f),()=>e(E));var k=z(H,2),c=U(k,!0);L(k),pe(k,f=>_(S,f),()=>e(S));var X=z(k,2);{var K=f=>{var de=qt(),we=U(de,!0);L(de),le(()=>ne(we,v())),M(f,de)};ee(X,f=>{x()&&!b()&&f(K)})}L(Q);var re=z(Q,2);return it(re,{get i18n(){return u()},get micDevices(){return e(t)},set micDevices(f){_(t,f)},$$legacy:!0}),L(T),le((f,de,we,xe,fe)=>{ne(W,f),He(d,1,`stop-button ${de??""}`,"svelte-1xuh0j1"),ne(p,we),ne(O,xe),ne(c,fe)},[()=>(y(u()),I(()=>u()("audio.record"))),()=>(y(o()),I(()=>o().isPaused()?"stop-button-paused":"")),()=>(y(u()),I(()=>u()("audio.stop"))),()=>(y(u()),I(()=>u()("audio.stop"))),()=>(y(u()),I(()=>u()("audio.resume")))]),ye("click",R,()=>o().startRecording()),ye("click",d,()=>{o().isPaused()&&(o().resumeRecording(),o().stopRecording()),o().stopRecording()}),ye("click",q,()=>{o().isPaused()&&(o().resumeRecording(),o().stopRecording()),o().stopRecording()}),ye("click",H,()=>o().pauseRecording()),ye("click",k,()=>o().resumeRecording()),M(ae,T),Se(te)}var Ot=G('<time class="trim-duration svelte-j9q3sk"> </time>'),Gt=G('<time class="duration svelte-j9q3sk"> </time>'),Vt=G('<time class="duration svelte-j9q3sk">0:00</time>'),Ht=G('<div class="timestamps svelte-j9q3sk"><time class="time svelte-j9q3sk">0:00</time> <div><!> <!></div></div>'),Nt=G('<div class="component-wrapper svelte-j9q3sk"><div class="microphone svelte-j9q3sk" data-testid="microphone-waveform"></div> <div data-testid="recording-waveform"></div> <!> <!> <!></div>');function Ft(ae,a){Ee(a,!1);let o=n(a,"mode",12),u=n(a,"i18n",12),h=n(a,"dispatch_blob",12),t=n(a,"waveform_settings",12),m=n(a,"waveform_options",28,()=>({show_recording_waveform:!0})),E=n(a,"handle_reset_value",12),S=n(a,"editable",12,!0),w=n(a,"recording",12,!1),g,s=D(),v=D(!1),b=D(),x=D(),A=D(),B=D(null),j=D(),V=D(),te=D(),T=D(0),Q,R=D(!1),W=D(0);const d=()=>{clearInterval(Q),Q=setInterval(()=>{ht(T)},1e3)},p=Ne();function q(){if(d(),_(R,!0),p("start_recording"),m().show_recording_waveform){let i=e(x);i&&(i.style.display="block")}}async function O(i){_(T,0),_(R,!1),clearInterval(Q);try{const P=await i.arrayBuffer(),_e=await new AudioContext({sampleRate:t().sampleRate}).decodeAudioData(P);_e&&await rt(_e).then(async be=>{await h()([be],"change"),await h()([be],"stop_recording")})}catch(P){console.error(P)}}let H=D(!1);const F=()=>{e(x)&&N(x,e(x).innerHTML=""),g!==void 0&&g.destroy(),e(x)&&(g=Ve.create({...t(),normalize:!1,container:e(x)}),_(A,g.registerPlugin(Fe.create())),e(A)?.on("record-end",O),e(A)?.on("record-start",q),e(A)?.on("record-pause",()=>{p("pause_recording"),clearInterval(Q)}),e(A)?.on("record-end",i=>{_(B,URL.createObjectURL(i));const P=e(x),oe=e(b);P&&(P.style.display="none"),oe&&e(B)&&(oe.innerHTML="",k())}),_(H,!0))},k=()=>{let i=e(b);!e(B)||!i||_(s,Ve.create({container:i,url:e(B),...t()}))},c=async(i,P)=>{o("edit");const oe=e(s).getDecodedData();oe&&await rt(oe,i,P).then(async _e=>{await h()([_e],"change"),await h()([_e],"stop_recording"),e(s).destroy(),k()}),p("edit")};qe(()=>{F(),window.addEventListener("keydown",i=>{e(b)&&e(b).contains(document.activeElement)&&(i.key==="ArrowRight"?tt(e(s),.1):i.key==="ArrowLeft"&&tt(e(s),-.1))})}),ie(()=>e(A),()=>{e(A)?.on("record-resume",()=>{d()})}),ie(()=>(e(s),e(V),ve),()=>{e(s)?.on("decode",i=>{_(te,i),e(V)&&N(V,e(V).textContent=ve(i))})}),ie(()=>(e(s),e(j),ve),()=>{e(s)?.on("timeupdate",i=>e(j)&&N(j,e(j).textContent=ve(i)))}),ie(()=>e(s),()=>{e(s)?.on("pause",()=>{p("pause"),_(v,!1)})}),ie(()=>e(s),()=>{e(s)?.on("play",()=>{p("play"),_(v,!0)})}),ie(()=>e(s),()=>{e(s)?.on("finish",()=>{p("stop"),_(v,!1)})}),Le();var X={get mode(){return o()},set mode(i){o(i),l()},get i18n(){return u()},set i18n(i){u(i),l()},get dispatch_blob(){return h()},set dispatch_blob(i){h(i),l()},get waveform_settings(){return t()},set waveform_settings(i){t(i),l()},get waveform_options(){return m()},set waveform_options(i){m(i),l()},get handle_reset_value(){return E()},set handle_reset_value(i){E(i),l()},get editable(){return S()},set editable(i){S(i),l()},get recording(){return w()},set recording(i){w(i),l()}};Ie();var K=Nt(),re=U(K);pe(re,i=>_(x,i),()=>e(x));var f=z(re,2);pe(f,i=>_(b,i),()=>e(b));var de=z(f,2);{var we=i=>{var P=Ht(),oe=U(P);pe(oe,$=>_(j,$),()=>e(j));var _e=z(oe,2),be=U(_e);{var Be=$=>{var se=Ot(),ge=U(se,!0);L(se),le(Ae=>ne(ge,Ae),[()=>(y(ve),e(W),I(()=>ve(e(W))))]),M($,se)};ee(be,$=>{o()==="edit"&&e(W)>0&&$(Be)})}var Te=z(be,2);{var ze=$=>{var se=Gt(),ge=U(se,!0);L(se),le(Ae=>ne(ge,Ae),[()=>(y(ve),e(T),I(()=>ve(e(T))))]),M($,se)},We=$=>{var se=Vt();pe(se,ge=>_(V,ge),()=>e(V)),M($,se)};ee(Te,$=>{e(R)?$(ze):$(We,!1)})}L(_e),L(P),M(i,P)};ee(de,i=>{e(R),e(B),y(m()),I(()=>(e(R)||e(B))&&m().show_recording_waveform)&&i(we)})}var xe=z(de,2);{var fe=i=>{{let P=Pe(()=>(y(ve),e(T),I(()=>ve(e(T)))));Wt(i,{get i18n(){return u()},get timing(){return e(R)},get recording(){return w()},get show_recording_waveform(){return y(m()),I(()=>m().show_recording_waveform)},get record_time(){return e(P)},get record(){return e(A)},set record(oe){_(A,oe)},$$legacy:!0})}};ee(xe,i=>{e(x)&&!e(B)&&e(H)&&i(fe)})}var Qe=z(xe,2);{var Z=i=>{kt(i,{get container(){return e(b)},get playing(){return e(v)},get audio_duration(){return e(te)},get i18n(){return u()},get editable(){return S()},interactive:!0,handle_trim_audio:c,show_redo:!0,get handle_reset_value(){return E()},get waveform_options(){return m()},get waveform(){return e(s)},set waveform(P){_(s,P)},get trimDuration(){return e(W)},set trimDuration(P){_(W,P)},get mode(){return o()},set mode(P){o(P)},$$legacy:!0})};ee(Qe,i=>{e(s)&&e(B)&&i(Z)})}return L(K),M(ae,K),Se(X)}var Qt=G('<div class="svelte-m6ymia"></div>'),Xt=G('<button><span class="record-icon svelte-m6ymia"><span class="pinger svelte-m6ymia"></span> <span class="dot svelte-m6ymia"></span></span> </button>'),Yt=G('<button class="spinner-button svelte-m6ymia"><div class="icon svelte-m6ymia"><!></div> </button>'),Jt=G('<button class="record-button svelte-m6ymia"><span class="record-icon svelte-m6ymia"><span class="dot svelte-m6ymia"></span></span> </button>'),Kt=G('<div class="mic-wrap svelte-m6ymia"><!> <div class="controls svelte-m6ymia"><!> <!></div></div>');function Zt(ae,a){Ee(a,!1);let o=n(a,"recording",12,!1),u=n(a,"paused_recording",12,!1),h=n(a,"stop",12),t=n(a,"record",12),m=n(a,"i18n",12),E=n(a,"waveform_settings",12),S=n(a,"waveform_options",28,()=>({show_recording_waveform:!0})),w=n(a,"waiting",12,!1),g,s=D(),v=D(),b=D([]);qe(()=>{x()});const x=()=>{g!==void 0&&g.destroy(),e(v)&&(g=Ve.create({...E(),normalize:!1,container:e(v)}),_(s,g.registerPlugin(Fe.create())))};var A={get recording(){return o()},set recording(d){o(d),l()},get paused_recording(){return u()},set paused_recording(d){u(d),l()},get stop(){return h()},set stop(d){h(d),l()},get record(){return t()},set record(d){t(d),l()},get i18n(){return m()},set i18n(d){m(d),l()},get waveform_settings(){return E()},set waveform_settings(d){E(d),l()},get waveform_options(){return S()},set waveform_options(d){S(d),l()},get waiting(){return w()},set waiting(d){w(d),l()}};Ie();var B=Kt(),j=U(B);{var V=d=>{var p=Qt();let q;pe(p,O=>_(v,O),()=>e(v)),le(()=>q=gt(p,"",q,{display:o()?"block":"none"})),M(d,p)};ee(j,d=>{y(S()),I(()=>S().show_recording_waveform)&&d(V)})}var te=z(j,2),T=U(te);{var Q=d=>{var p=Xt(),q=z(U(p));L(p),le(O=>{He(p,1,mt(u()?"stop-button-paused":"stop-button"),"svelte-m6ymia"),ne(q,` ${O??""}`)},[()=>(y(u()),y(m()),I(()=>u()?m()("audio.pause"):m()("audio.stop")))]),ye("click",p,()=>{e(s)?.stopMic(),h()()}),M(d,p)},R=d=>{var p=De(),q=ce(p);{var O=F=>{var k=Yt(),c=U(k),X=U(c);Ct(X),L(c);var K=z(c);L(k),le(re=>ne(K,` ${re??""}`),[()=>(y(m()),I(()=>m()("audio.waiting")))]),ye("click",k,()=>{h()()}),M(F,k)},H=F=>{var k=Jt(),c=z(U(k));L(k),le(X=>ne(c,` ${X??""}`),[()=>(y(m()),I(()=>m()("audio.record")))]),ye("click",k,()=>{e(s)?.startMic(),t()()}),M(F,k)};ee(q,F=>{o()&&w()?F(O):F(H,!1)},!0)}M(d,p)};ee(T,d=>{o()&&!w()?d(Q):d(R,!1)})}var W=z(T,2);return it(W,{get i18n(){return m()},get micDevices(){return e(b)},set micDevices(d){_(b,d)},$$legacy:!0}),L(te),L(B),M(ae,B),Se(A)}let ot;async function $t(){const{MediaRecorder:ae,register:a}=await Ke(async()=>{const{MediaRecorder:u,register:h}=await import("./module-FFb15TvM.js");return{MediaRecorder:u,register:h}},__vite__mapDeps([0,1]),import.meta.url),{connect:o}=await Ke(async()=>{const{connect:u}=await import("./module-8x-imyhh.js");return{connect:u}},__vite__mapDeps([2,1]),import.meta.url);return a(await o()),ot=ae,ot}var er=G("<!> <!>",1),tr=G("<!> <!>",1),rr=G("<!> <div><!> <!> <!></div>",1);function ar(ae,a){Ee(a,!1);let o=n(a,"value",12,null),u=n(a,"subtitles",12,null),h=n(a,"label",12),t=n(a,"root",12),m=n(a,"loop",12),E=n(a,"show_label",12,!0),S=n(a,"buttons",28,()=>["download","share"]),w=n(a,"sources",28,()=>["microphone","upload"]),g=n(a,"pending",12,!1),s=n(a,"streaming",12,!1),v=n(a,"i18n",12),b=n(a,"waveform_settings",12),x=n(a,"trim_region_settings",28,()=>({})),A=n(a,"waveform_options",28,()=>({})),B=n(a,"dragging",12),j=n(a,"active_source",12),V=n(a,"handle_reset_value",12,()=>{}),te=n(a,"editable",12,!0),T=n(a,"max_file_size",12,null),Q=n(a,"upload",12),R=n(a,"stream_handler",12),W=n(a,"stream_every",12,.1),d=n(a,"uploading",12,!1),p=n(a,"recording",12,!1),q=n(a,"class_name",12,""),O=n(a,"upload_promise",12,null),H=n(a,"initial_value",12,null),F=n(a,"time_limit",12,null),k=n(a,"stream_state",12,"closed"),c=D(),X=D(""),K=D(void 0),re=D([]),f=D(!1),de=!1,we;const xe=44;let fe=[];typeof window<"u"&&s()&&$t().then(r=>{we=r});const Z=Ne(),i=r=>r.map(C=>C instanceof Blob?C:C.slice()),P=async(r,C)=>{let ue=new File(i(r),"audio.wav",{type:"audio/wav"});if(ue.size===0)return;const Re=await wt([ue],C==="stream");H(o()),o((await Q()(Re,t(),void 0,T()||void 0))?.filter(Boolean)[0]),Z(C,o())};st(()=>{s()&&e(c)&&e(c).state!=="inactive"&&e(c).stop()});async function oe(){let r;try{r=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(C){if(!navigator.mediaDevices){Z("error",v()("audio.no_device_support"));return}if(C instanceof DOMException&&C.name=="NotAllowedError"){Z("error",v()("audio.allow_recording_access"));return}throw C}r!=null&&(s()?(_(c,new we(r,{mimeType:"audio/wav"})),e(c).addEventListener("dataavailable",_e)):(_(c,new MediaRecorder(r)),e(c).addEventListener("dataavailable",C=>{fe.push(C.data)})),e(c).addEventListener("stop",async()=>{p(!1),e(c).stop(),await P(fe,"change"),await P(fe,"stop_recording"),fe=[]}),de=!0)}async function _e(r){let C=await r.data.arrayBuffer(),ue=new Uint8Array(C);if(e(K)||(_(K,new Uint8Array(C.slice(0,xe))),ue=new Uint8Array(C.slice(xe))),g())e(re).push(ue);else{let Re=[e(K)].concat(e(re),[ue]);if(!p()||k()==="waiting")return;P(Re,"stream"),_(re,[])}}async function be(){p(!0),Z("start_recording"),de||await oe(),_(K,void 0),s()&&e(c).state!="recording"&&e(c).start(W()*1e3)}function Be(){Z("change",null),Z("clear"),_(X,""),o(null)}function Te({detail:r}){o(r),Z("change",r),Z("upload",r)}async function ze(){p(!1),s()&&(Z("close_stream"),Z("stop_recording"),e(c).stop(),g()&&_(f,!0),P(fe,"stop_recording"),Z("clear"),_(X,""))}ie(()=>y(B()),()=>{Z("drag",B())}),ie(()=>(e(f),y(g()),e(K),e(re)),()=>{if(e(f)&&g()===!1&&(_(f,!1),e(K)&&e(re))){let r=[e(K)].concat(e(re));_(re,[]),P(r,"stream")}}),ie(()=>(y(p()),e(c)),()=>{!p()&&e(c)&&ze()}),ie(()=>(y(p()),e(c)),()=>{p()&&e(c)&&be()}),Le();var We={get value(){return o()},set value(r){o(r),l()},get subtitles(){return u()},set subtitles(r){u(r),l()},get label(){return h()},set label(r){h(r),l()},get root(){return t()},set root(r){t(r),l()},get loop(){return m()},set loop(r){m(r),l()},get show_label(){return E()},set show_label(r){E(r),l()},get buttons(){return S()},set buttons(r){S(r),l()},get sources(){return w()},set sources(r){w(r),l()},get pending(){return g()},set pending(r){g(r),l()},get streaming(){return s()},set streaming(r){s(r),l()},get i18n(){return v()},set i18n(r){v(r),l()},get waveform_settings(){return b()},set waveform_settings(r){b(r),l()},get trim_region_settings(){return x()},set trim_region_settings(r){x(r),l()},get waveform_options(){return A()},set waveform_options(r){A(r),l()},get dragging(){return B()},set dragging(r){B(r),l()},get active_source(){return j()},set active_source(r){j(r),l()},get handle_reset_value(){return V()},set handle_reset_value(r){V(r),l()},get editable(){return te()},set editable(r){te(r),l()},get max_file_size(){return T()},set max_file_size(r){T(r),l()},get upload(){return Q()},set upload(r){Q(r),l()},get stream_handler(){return R()},set stream_handler(r){R(r),l()},get stream_every(){return W()},set stream_every(r){W(r),l()},get uploading(){return d()},set uploading(r){d(r),l()},get recording(){return p()},set recording(r){p(r),l()},get class_name(){return q()},set class_name(r){q(r),l()},get upload_promise(){return O()},set upload_promise(r){O(r),l()},get initial_value(){return H()},set initial_value(r){H(r),l()},get time_limit(){return F()},set time_limit(r){F(r),l()},get stream_state(){return k()},set stream_state(r){k(r),l()}};Ie();var $=rr(),se=ce($);{let r=Pe(()=>j()==="upload"&&o()===null),C=Pe(()=>(y(h()),y(v()),I(()=>h()||v()("audio.audio"))));Et(se,{get show_label(){return E()},get Icon(){return St},get float(){return e(r)},get label(){return e(C)}})}var ge=z(se,2),Ae=U(ge);jt(Ae,{get time_limit(){return F()}});var Xe=z(Ae,2);{var nt=r=>{var C=De(),ue=ce(C);{var Re=Y=>{var Me=er(),Ue=ce(Me);et(Ue,{get i18n(){return v()},$$events:{clear:Be}});var Oe=z(Ue,2);{var Ce=J=>{{let me=Pe(()=>k()==="waiting");Zt(J,{record:be,get recording(){return p()},stop:ze,get i18n(){return v()},get waveform_settings(){return b()},get waveform_options(){return A()},get waiting(){return e(me)}})}},Ge=J=>{Ft(J,{get i18n(){return v()},get editable(){return te()},get recording(){return p()},dispatch_blob:P,get waveform_settings(){return b()},get waveform_options(){return A()},get handle_reset_value(){return V()},get mode(){return e(X)},set mode(me){_(X,me)},$$events:{start_recording(me){ke.call(this,a,me)},pause_recording(me){ke.call(this,a,me)},stop_recording(me){ke.call(this,a,me)}},$$legacy:!0})};ee(Oe,J=>{s()?J(Ce):J(Ge,!1)})}M(Y,Me)},je=Y=>{var Me=De(),Ue=ce(Me);{var Oe=Ce=>{{let Ge=Pe(()=>(y(v()),I(()=>v()("audio.drop_to_upload"))));Dt(Ce,{filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",get root(){return t()},get max_file_size(){return T()},get upload(){return Q()},get stream_handler(){return R()},get aria_label(){return e(Ge)},get upload_promise(){return O()},set upload_promise(J){O(J)},get dragging(){return B()},set dragging(J){B(J)},get uploading(){return d()},set uploading(J){d(J)},$$events:{load:Te,error:({detail:J})=>Z("error",J)},children:(J,me)=>{var Ye=De(),ut=ce(Ye);pt(ut,a,"default",{},null),M(J,Ye)},$$slots:{default:!0},$$legacy:!0})}};ee(Ue,Ce=>{j()==="upload"&&Ce(Oe)},!0)}M(Y,Me)};ee(ue,Y=>{j()==="microphone"?Y(Re):Y(je,!1)})}M(r,C)},lt=r=>{var C=tr(),ue=ce(C);{let je=Pe(()=>(y(S()),y(o()),I(()=>S()===null||S().includes("download")?o().url:null)));et(ue,{get i18n(){return v()},get download(){return e(je)},$$events:{clear:Be,edit:()=>_(X,"edit")}})}var Re=z(ue,2);{let je=Pe(()=>(y(u()),I(()=>Array.isArray(u())?u():u()?.url)));Pt(Re,{get value(){return o()},get subtitles(){return e(je)},get label(){return h()},get i18n(){return v()},dispatch_blob:P,get waveform_settings(){return b()},get waveform_options(){return A()},get trim_region_settings(){return x()},get handle_reset_value(){return V()},get editable(){return te()},get loop(){return m()},interactive:!0,get mode(){return e(X)},set mode(Y){_(X,Y)},$$events:{stop(Y){ke.call(this,a,Y)},play(Y){ke.call(this,a,Y)},pause(Y){ke.call(this,a,Y)},edit(Y){ke.call(this,a,Y)}},$$legacy:!0})}M(r,C)};ee(Xe,r=>{o()===null||s()?r(nt):r(lt,!1)})}var dt=z(Xe,2);return Bt(dt,{get sources(){return w()},handle_clear:Be,get active_source(){return j()},set active_source(r){j(r)},$$legacy:!0}),L(ge),le(()=>{He(ge,1,`audio-container ${q()??""}`,"svelte-ocxd3m"),vt(ge,"data-testid",h()?"waveform-"+h():"unlabelled-audio")}),M(ae,$),Se(We)}var or=G("<!> <!>",1),sr=G("<!> <!>",1);function Qr(ae,a){Ee(a,!0);let o=ft(a,["$$slots","$$events","$$legacy"]),u=Ze(void 0);a.props.stream_every=.1;class h extends Rt{async get_data(){return e(u)&&(await e(u),await xt()),await super.get_data()}}const t=new h(o);let m=he(()=>t.shared.label||t.i18n("audio.audio")),E=he(()=>a.minimal??t.props.minimal??!1),S=he(()=>t.props.sources?t.props.sources[0]:null),w=t.props.value;const g=()=>{w===null||t.props.value===w||(t.props.value=w)};let s,v="darkorange",b=he(()=>({height:50,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:t.props.autoplay,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20}));const x={color:t.props.waveform_options.trim_region_color,drag:!0,resize:!0};function A(){document.documentElement.style.setProperty("--trim-region-color",x.color||v)}function B({detail:R}){const[W,d]=R.includes("Invalid file type")?["warning","complete"]:["error","error"];t.shared.loading_status&&(t.shared.loading_status.status=d,t.shared.loading_status.message=R),t.dispatch(W,R)}let j=Ze(bt(t.props.value));yt(()=>{e(j)!=t.props.value&&(_(j,t.props.value,!0),t.dispatch("change"))}),qe(()=>{v=getComputedStyle(document?.documentElement).getPropertyValue("--color-accent"),A(),e(b).waveColor=t.props.waveform_options.waveform_color||"#9ca3af",e(b).progressColor=t.props.waveform_options.waveform_progress_color||v,e(b).mediaControls=t.props.waveform_options.show_controls,e(b).sampleRate=t.props.waveform_options.sample_rate||44100});var V=De(),te=ce(V);{var T=R=>{{let W=he(()=>s?"focus":"base");at(R,{variant:"solid",get border_mode(){return e(W)},padding:!1,allow_overflow:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get visible(){return t.shared.visible},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},children:(d,p)=>{var q=or(),O=ce(q);$e(O,Je({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var H=z(O,2);{let F=he(()=>t.props.buttons??["download","share"]);At(H,{get i18n(){return t.i18n},get show_label(){return t.shared.show_label},get buttons(){return e(F)},get value(){return t.props.value},get subtitles(){return t.props.subtitles},get label(){return e(m)},get loop(){return t.props.loop},get waveform_settings(){return e(b)},get waveform_options(){return t.props.waveform_options},get editable(){return t.props.editable},get minimal(){return e(E)},$$events:{share:k=>t.dispatch("share",k.detail),error:k=>t.dispatch("error",k.detail),play:()=>t.dispatch("play"),pause:()=>t.dispatch("pause"),stop:()=>t.dispatch("stop")}})}M(d,q)},$$slots:{default:!0}})}},Q=R=>{{let W=he(()=>t.props.value===null&&e(S)==="upload"?"dashed":"solid"),d=he(()=>s?"focus":"base");at(R,{get variant(){return e(W)},get border_mode(){return e(d)},padding:!1,allow_overflow:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get visible(){return t.shared.visible},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},children:(p,q)=>{var O=sr(),H=ce(O);$e(H,Je({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var F=z(H,2);{let k=he(()=>t.props.buttons??[]);ar(F,{get label(){return e(m)},get show_label(){return t.shared.show_label},get buttons(){return e(k)},get value(){return t.props.value},get subtitles(){return t.props.subtitles},get root(){return t.shared.root},get sources(){return t.props.sources},get active_source(){return e(S)},get pending(){return t.shared.loading_status.pending},get streaming(){return t.props.streaming},get loop(){return t.props.loop},get max_file_size(){return t.shared.max_file_size},handle_reset_value:g,get editable(){return t.props.editable},get i18n(){return t.i18n},get waveform_settings(){return e(b)},get waveform_options(){return t.props.waveform_options},get trim_region_settings(){return x},get stream_every(){return t.props.stream_every},get stream_state(){return t.shared.loading_status.stream_state},upload:(...c)=>t.shared.client.upload(...c),stream_handler:(...c)=>t.shared.client.stream(...c),get time_limit(){return t.shared.loading_status.time_limit},get upload_promise(){return e(u)},set upload_promise(c){_(u,c,!0)},get initial_value(){return w},set initial_value(c){w=c},get recording(){return t.props.recording},set recording(c){t.props.recording=c},get dragging(){return s},set dragging(c){s=c},$$events:{change:({detail:c})=>t.props.value=c,stream:({detail:c})=>{t.props.value=c,t.dispatch("stream",t.props.value)},drag:({detail:c})=>s=c,edit:()=>t.dispatch("edit"),play:()=>t.dispatch("play"),pause:()=>t.dispatch("pause"),stop:()=>t.dispatch("stop"),start_recording:()=>t.dispatch("start_recording"),pause_recording:()=>t.dispatch("pause_recording"),stop_recording:c=>{t.dispatch("stop_recording"),t.dispatch("input")},upload:()=>{t.dispatch("upload"),t.dispatch("input")},clear:()=>{t.dispatch("clear"),t.dispatch("input")},error:B,close_stream:()=>t.dispatch("close_stream","stream")},children:(c,X)=>{It(c,{get i18n(){return t.i18n},type:"audio"})},$$slots:{default:!0}})}M(p,O)},$$slots:{default:!0}})}};ee(te,R=>{t.shared.interactive?R(Q,!1):R(T)})}M(ae,V),Se()}export{Jr as BaseExample,ar as BaseInteractiveAudio,Pt as BasePlayer,At as BaseStaticAudio,Qr as default};
