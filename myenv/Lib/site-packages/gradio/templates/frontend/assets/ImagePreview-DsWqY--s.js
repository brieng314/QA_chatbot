import{p as d,d as ee,i as v,e as te,a as re}from"./i18n-CLA-aXfX.js";import{p as ae,R as le,f as E,U as L,i as p,V as P,b as z,c as ne,g as _,Q as g,d as o,s as w,h as D,r as M,m as oe,j as se,t as ie,e as ue}from"./index-zQcUQ9m1.js";import{b as y}from"./misc-snWqx6W0.js";import{u as ce}from"./utils.svelte-DtXXSlyN.js";/* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-C7vd_kT1.js";import{B as de}from"./BlockLabel-BmXTkHTt.js";import{D as _e}from"./DownloadLink-DaQ_7WnR.js";import{I as ge}from"./IconButton-B7IBJBO5.js";import{E as fe}from"./Empty-BZ_-KNsK.js";import{S as me}from"./ShareButton-_eP1IUQf.js";import{D as be}from"./Download-X4TzKHZY.js";import{I as O}from"./Image-D4Pb0B7j.js";import{I as he}from"./IconButtonWrapper-dc02OfMv.js";import{F as ve}from"./FullscreenButton-DgZ1jO8K.js";import{I as pe}from"./Image-4Q0YgCzk.js";/* empty css                                                   */const we=f=>{let t;if(f.currentTarget instanceof Element)t=f.currentTarget.querySelector("img");else return[NaN,NaN];const r=t.getBoundingClientRect(),u=t.naturalWidth/r.width,s=t.naturalHeight/r.height;if(u>s){const l=t.naturalHeight/u,b=(r.height-l)/2;var a=Math.round((f.clientX-r.left)*u),m=Math.round((f.clientY-r.top-b)*u)}else{const l=t.naturalWidth/s,b=(r.width-l)/2;var a=Math.round((f.clientX-r.left-b)*s),m=Math.round((f.clientY-r.top)*s)}return a<0||a>=t.naturalWidth||m<0||m>=t.naturalHeight?null:[a,m]};var ye=E("<!> <!> <!>",1),Ie=E('<div class="image-container svelte-12vrxzd"><!> <button class="svelte-12vrxzd"><div><!></div></button></div>'),ke=E("<!> <!>",1);function xe(f,t){ae(t,!1);let r=d(t,"value",12),u=d(t,"label",12,void 0),s=d(t,"show_label",12),a=d(t,"buttons",12,null),m=d(t,"selectable",12,!1),l=d(t,"i18n",12),b=d(t,"display_icon_button_wrapper_top_corner",12,!1),I=d(t,"fullscreen",12,!1),k=d(t,"show_button_background",12,!0);const X=le(),Y=e=>{let c=we(e);c&&X("select",{index:c,value:null})};let H=oe();var C={get value(){return r()},set value(e){r(e),_()},get label(){return u()},set label(e){u(e),_()},get show_label(){return s()},set show_label(e){s(e),_()},get buttons(){return a()},set buttons(e){a(e),_()},get selectable(){return m()},set selectable(e){m(e),_()},get i18n(){return l()},set i18n(e){l(e),_()},get display_icon_button_wrapper_top_corner(){return b()},set display_icon_button_wrapper_top_corner(e){b(e),_()},get fullscreen(){return I()},set fullscreen(e){I(e),_()},get show_button_background(){return k()},set show_button_background(e){k(e),_()}};ee();var N=ke(),T=L(N);{let e=P(()=>(o(s()),o(u()),o(l()),g(()=>s()?u()||l()("image.image"):"")));de(T,{get show_label(){return s()},get Icon(){return O},get label(){return p(e)}})}var Q=w(T,2);{var U=e=>{fe(e,{unpadded_box:!0,size:"large",children:(c,x)=>{O(c)},$$slots:{default:!0}})},V=e=>{var c=Ie(),x=D(c);he(x,{get display_top_corner(){return b()},get show_background(){return k()},children:(h,Se)=>{var j=ye(),F=L(j);{var G=n=>{ve(n,{get fullscreen(){return I()},$$events:{fullscreen(i){y.call(this,t,i)}}})};v(F,n=>{o(a()),g(()=>a()===null?!0:a().includes("fullscreen"))&&n(G)})}var R=w(F,2);{var J=n=>{{let i=P(()=>(o(r()),g(()=>r().orig_name||"image")));_e(n,{get href(){return o(r()),g(()=>r().url)},get download(){return p(i)},children:(q,Be)=>{{let $=P(()=>(o(l()),g(()=>l()("common.download"))));ge(q,{get Icon(){return be},get label(){return p($)}})}},$$slots:{default:!0}})}};v(R,n=>{o(a()),g(()=>a()===null?!0:a().includes("download"))&&n(J)})}var K=w(R,2);{var Z=n=>{me(n,{get i18n(){return l()},formatter:async i=>i?`<img src="${await ce(i)}" />`:"",get value(){return r()},$$events:{share(i){y.call(this,t,i)},error(i){y.call(this,t,i)}}})};v(K,n=>{o(a()),g(()=>a()===null?!0:a().includes("share"))&&n(Z)})}z(h,j)},$$slots:{default:!0}});var S=w(x,2),B=D(S);let W;var A=D(B);pe(A,{get src(){return o(r()),g(()=>r().url)},restProps:{loading:"lazy",alt:""},$$events:{load(h){y.call(this,t,h)}}}),M(B),M(S),M(c),te(c,h=>se(H,h),()=>p(H)),ie(()=>W=re(B,1,"image-frame svelte-12vrxzd",null,W,{selectable:m()})),ue("click",S,Y),z(e,c)};v(Q,e=>{o(r()),g(()=>r()==null||!r()?.url)?e(U):e(V,!1)})}return z(f,N),ne(C)}const Ce=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{xe as I,Ce as a,we as g};
